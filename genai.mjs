/* esm.sh - @google/genai@0.8.0 */
var G=class{};function E(o,n){let e=/\{([^}]+)\}/g;return o.replace(e,(t,r)=>{if(Object.prototype.hasOwnProperty.call(n,r)){let l=n[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function i(o,n,e){for(let l=0;l<n.length-1;l++){let a=n[l];if(a.endsWith("[]")){let u=a.slice(0,-2);if(!(u in o))if(Array.isArray(e))o[u]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(o[u])){let f=o[u];if(Array.isArray(e))for(let d=0;d<f.length;d++){let c=f[d];i(c,n.slice(l+1),e[d])}else for(let d of f)i(d,n.slice(l+1),e)}return}else if(a.endsWith("[0]")){let u=a.slice(0,-3);u in o||(o[u]=[{}]);let f=o[u];i(f[0],n.slice(l+1),e);return}(!o[a]||typeof o[a]!="object")&&(o[a]={}),o=o[a]}let t=n[n.length-1],r=o[t];if(r!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===r)return;if(typeof r=="object"&&typeof e=="object"&&r!==null&&e!==null)Object.assign(r,e);else throw new Error(`Cannot set value for an existing key. Key: ${t}`)}else o[t]=e}function s(o,n){try{if(n.length===1&&n[0]==="_self")return o;for(let e=0;e<n.length;e++){if(typeof o!="object"||o===null)return;let t=n[e];if(t.endsWith("[]")){let r=t.slice(0,-2);if(r in o){let l=o[r];return Array.isArray(l)?l.map(a=>s(a,n.slice(e+1))):void 0}else return}else o=o[t]}return o}catch(e){if(e instanceof TypeError)return;throw e}}function A(o,n){if(!n||typeof n!="string")throw new Error("model is required and must be a string");if(o.isVertexAI()){if(n.startsWith("publishers/")||n.startsWith("projects/")||n.startsWith("models/"))return n;if(n.indexOf("/")>=0){let e=n.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${n}`}else return n.startsWith("models/")||n.startsWith("tunedModels/")?n:`models/${n}`}function wn(o,n){let e=A(o,n);return e?e.startsWith("publishers/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}`:e.startsWith("models/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/publishers/google/${e}`:e:""}function xe(o,n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function H(o,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>xe(o,e)):[xe(o,n)]}function Dn(o){return o!=null&&typeof o=="object"&&"parts"in o&&Array.isArray(o.parts)}function On(o){return o!=null&&typeof o=="object"&&"functionCall"in o}function Me(o){return!(o==null||On(o))}function Vn(o){return o==null||Array.isArray(o)&&o.length===0?!1:o.every(Me)}function P(o,n){if(n==null)throw new Error("ContentUnion is required");return Dn(n)?n:Me(n)?{role:"user",parts:H(o,n)}:{role:"model",parts:H(o,n)}}function Un(o,n){if(!n)return[];if(o.isVertexAI()&&Array.isArray(n))return n.flatMap(e=>{let t=P(o,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]});if(o.isVertexAI()){let e=P(o,n);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(n)?n.map(e=>P(o,e)):[P(o,n)]}function K(o,n,e){e.length!==0&&(Vn(e)?n.push({role:"user",parts:H(o,e)}):n.push({role:"model",parts:H(o,e)}),e.length=0)}function zn(o,n,e,t){Me(t)===Vn(e)||(K(o,n,e),e.length=0),e.push(t)}function I(o,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n))return[P(o,n)];let e=[],t=[];for(let r of n)if(Dn(r))K(o,e,t),e.push(r);else if(typeof r=="string"||typeof r=="object"&&!Array.isArray(r))zn(o,e,t,r);else if(Array.isArray(r))K(o,e,t),e.push({role:"user",parts:H(o,r)});else throw new Error(`Unsupported content type: ${typeof r}`);return K(o,e,t),e}function W(o,n){if(!o.isVertexAI()&&"default"in n)throw new Error("Default value is not supported in the response schema for the Gemini API.");if("anyOf"in n&&n.anyOf!==void 0)for(let e of n.anyOf)W(o,e);if("items"in n&&n.items!==void 0&&W(o,n.items),"properties"in n&&n.properties!==void 0)for(let e of Object.values(n.properties))W(o,e)}function Fn(o,n){return W(o,n),n}function Ln(o,n){if(typeof n=="object"&&"voiceConfig"in n)return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function kn(o,n){return n}function k(o,n){if(!Array.isArray(n))throw new Error("tool is required and must be an array of Tools");return n}function Xn(o,n,e,t=1){let r=!n.startsWith(`${e}/`)&&n.split("/").length===t;return o.isVertexAI()?n.startsWith("projects/")?n:n.startsWith("locations/")?`projects/${o.getProject()}/${n}`:n.startsWith(`${e}/`)?`projects/${o.getProject()}/locations/${o.getLocation()}/${n}`:r?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}/${n}`:n:r?`${e}/${n}`:n}function D(o,n){if(typeof n!="string")throw new Error("name must be a string");return Xn(o,n,"cachedContents")}function V(o,n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function Gn(o,n){if(typeof n!="string")throw new Error("fromName must be a string");return n.startsWith("files/")?n.split("files/")[1]:n}function Qn(o,n){let e={};if(s(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");let t=s(n,["thought"]);t!=null&&i(e,["thought"],t);let r=s(n,["codeExecutionResult"]);r!=null&&i(e,["codeExecutionResult"],r);let l=s(n,["executableCode"]);l!=null&&i(e,["executableCode"],l);let a=s(n,["fileData"]);a!=null&&i(e,["fileData"],a);let u=s(n,["functionCall"]);u!=null&&i(e,["functionCall"],u);let f=s(n,["functionResponse"]);f!=null&&i(e,["functionResponse"],f);let d=s(n,["inlineData"]);d!=null&&i(e,["inlineData"],d);let c=s(n,["text"]);return c!=null&&i(e,["text"],c),e}function Ne(o,n){let e={},t=s(n,["parts"]);t!=null&&(Array.isArray(t)?i(e,["parts"],t.map(l=>Qn(o,l))):i(e,["parts"],t));let r=s(n,["role"]);return r!=null&&i(e,["role"],r),e}function Zn(o,n){let e={};if(s(n,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");let t=s(n,["description"]);t!=null&&i(e,["description"],t);let r=s(n,["name"]);r!=null&&i(e,["name"],r);let l=s(n,["parameters"]);return l!=null&&i(e,["parameters"],l),e}function bn(){return{}}function jn(o,n){let e={},t=s(n,["mode"]);t!=null&&i(e,["mode"],t);let r=s(n,["dynamicThreshold"]);return r!=null&&i(e,["dynamicThreshold"],r),e}function et(o,n){let e={},t=s(n,["dynamicRetrievalConfig"]);return t!=null&&i(e,["dynamicRetrievalConfig"],jn(o,t)),e}function nt(o,n){let e={},t=s(n,["functionDeclarations"]);if(t!=null&&(Array.isArray(t)?i(e,["functionDeclarations"],t.map(u=>Zn(o,u))):i(e,["functionDeclarations"],t)),s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");s(n,["googleSearch"])!=null&&i(e,["googleSearch"],bn());let l=s(n,["googleSearchRetrieval"]);l!=null&&i(e,["googleSearchRetrieval"],et(o,l));let a=s(n,["codeExecution"]);return a!=null&&i(e,["codeExecution"],a),e}function tt(o,n){let e={},t=s(n,["mode"]);t!=null&&i(e,["mode"],t);let r=s(n,["allowedFunctionNames"]);return r!=null&&i(e,["allowedFunctionNames"],r),e}function ot(o,n){let e={},t=s(n,["functionCallingConfig"]);return t!=null&&i(e,["functionCallingConfig"],tt(o,t)),e}function it(o,n,e){let t={},r=s(n,["ttl"]);e!==void 0&&r!=null&&i(e,["ttl"],r);let l=s(n,["expireTime"]);e!==void 0&&l!=null&&i(e,["expireTime"],l);let a=s(n,["displayName"]);e!==void 0&&a!=null&&i(e,["displayName"],a);let u=s(n,["contents"]);e!==void 0&&u!=null&&(Array.isArray(u)?i(e,["contents"],I(o,I(o,u).map(p=>Ne(o,p)))):i(e,["contents"],I(o,u)));let f=s(n,["systemInstruction"]);e!==void 0&&f!=null&&i(e,["systemInstruction"],Ne(o,P(o,f)));let d=s(n,["tools"]);e!==void 0&&d!=null&&(Array.isArray(d)?i(e,["tools"],d.map(p=>nt(o,p))):i(e,["tools"],d));let c=s(n,["toolConfig"]);return e!==void 0&&c!=null&&i(e,["toolConfig"],ot(o,c)),t}function st(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["model"],wn(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],it(o,r,e)),e}function rt(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["_url","name"],D(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],r),e}function lt(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["_url","name"],D(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],r),e}function ut(o,n,e){let t={},r=s(n,["ttl"]);e!==void 0&&r!=null&&i(e,["ttl"],r);let l=s(n,["expireTime"]);return e!==void 0&&l!=null&&i(e,["expireTime"],l),t}function at(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["_url","name"],D(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],ut(o,r,e)),e}function ft(o,n,e){let t={},r=s(n,["pageSize"]);e!==void 0&&r!=null&&i(e,["_query","pageSize"],r);let l=s(n,["pageToken"]);return e!==void 0&&l!=null&&i(e,["_query","pageToken"],l),t}function dt(o,n){let e={},t=s(n,["config"]);return t!=null&&i(e,["config"],ft(o,t,e)),e}function ct(o,n){let e={},t=s(n,["videoMetadata"]);t!=null&&i(e,["videoMetadata"],t);let r=s(n,["thought"]);r!=null&&i(e,["thought"],r);let l=s(n,["codeExecutionResult"]);l!=null&&i(e,["codeExecutionResult"],l);let a=s(n,["executableCode"]);a!=null&&i(e,["executableCode"],a);let u=s(n,["fileData"]);u!=null&&i(e,["fileData"],u);let f=s(n,["functionCall"]);f!=null&&i(e,["functionCall"],f);let d=s(n,["functionResponse"]);d!=null&&i(e,["functionResponse"],d);let c=s(n,["inlineData"]);c!=null&&i(e,["inlineData"],c);let p=s(n,["text"]);return p!=null&&i(e,["text"],p),e}function we(o,n){let e={},t=s(n,["parts"]);t!=null&&(Array.isArray(t)?i(e,["parts"],t.map(l=>ct(o,l))):i(e,["parts"],t));let r=s(n,["role"]);return r!=null&&i(e,["role"],r),e}function pt(o,n){let e={},t=s(n,["example"]);t!=null&&i(e,["example"],t);let r=s(n,["pattern"]);r!=null&&i(e,["pattern"],r);let l=s(n,["default"]);l!=null&&i(e,["default"],l);let a=s(n,["maxLength"]);a!=null&&i(e,["maxLength"],a);let u=s(n,["minLength"]);u!=null&&i(e,["minLength"],u);let f=s(n,["minProperties"]);f!=null&&i(e,["minProperties"],f);let d=s(n,["maxProperties"]);d!=null&&i(e,["maxProperties"],d);let c=s(n,["anyOf"]);c!=null&&i(e,["anyOf"],c);let p=s(n,["description"]);p!=null&&i(e,["description"],p);let h=s(n,["enum"]);h!=null&&i(e,["enum"],h);let m=s(n,["format"]);m!=null&&i(e,["format"],m);let g=s(n,["items"]);g!=null&&i(e,["items"],g);let y=s(n,["maxItems"]);y!=null&&i(e,["maxItems"],y);let C=s(n,["maximum"]);C!=null&&i(e,["maximum"],C);let v=s(n,["minItems"]);v!=null&&i(e,["minItems"],v);let T=s(n,["minimum"]);T!=null&&i(e,["minimum"],T);let _=s(n,["nullable"]);_!=null&&i(e,["nullable"],_);let S=s(n,["properties"]);S!=null&&i(e,["properties"],S);let R=s(n,["propertyOrdering"]);R!=null&&i(e,["propertyOrdering"],R);let x=s(n,["required"]);x!=null&&i(e,["required"],x);let N=s(n,["title"]);N!=null&&i(e,["title"],N);let w=s(n,["type"]);return w!=null&&i(e,["type"],w),e}function mt(o,n){let e={},t=s(n,["response"]);t!=null&&i(e,["response"],pt(o,t));let r=s(n,["description"]);r!=null&&i(e,["description"],r);let l=s(n,["name"]);l!=null&&i(e,["name"],l);let a=s(n,["parameters"]);return a!=null&&i(e,["parameters"],a),e}function ht(){return{}}function gt(o,n){let e={},t=s(n,["mode"]);t!=null&&i(e,["mode"],t);let r=s(n,["dynamicThreshold"]);return r!=null&&i(e,["dynamicThreshold"],r),e}function yt(o,n){let e={},t=s(n,["dynamicRetrievalConfig"]);return t!=null&&i(e,["dynamicRetrievalConfig"],gt(o,t)),e}function Ct(o,n){let e={},t=s(n,["functionDeclarations"]);t!=null&&(Array.isArray(t)?i(e,["functionDeclarations"],t.map(f=>mt(o,f))):i(e,["functionDeclarations"],t));let r=s(n,["retrieval"]);r!=null&&i(e,["retrieval"],r),s(n,["googleSearch"])!=null&&i(e,["googleSearch"],ht());let a=s(n,["googleSearchRetrieval"]);a!=null&&i(e,["googleSearchRetrieval"],yt(o,a));let u=s(n,["codeExecution"]);return u!=null&&i(e,["codeExecution"],u),e}function Tt(o,n){let e={},t=s(n,["mode"]);t!=null&&i(e,["mode"],t);let r=s(n,["allowedFunctionNames"]);return r!=null&&i(e,["allowedFunctionNames"],r),e}function Et(o,n){let e={},t=s(n,["functionCallingConfig"]);return t!=null&&i(e,["functionCallingConfig"],Tt(o,t)),e}function vt(o,n,e){let t={},r=s(n,["ttl"]);e!==void 0&&r!=null&&i(e,["ttl"],r);let l=s(n,["expireTime"]);e!==void 0&&l!=null&&i(e,["expireTime"],l);let a=s(n,["displayName"]);e!==void 0&&a!=null&&i(e,["displayName"],a);let u=s(n,["contents"]);e!==void 0&&u!=null&&(Array.isArray(u)?i(e,["contents"],I(o,I(o,u).map(p=>we(o,p)))):i(e,["contents"],I(o,u)));let f=s(n,["systemInstruction"]);e!==void 0&&f!=null&&i(e,["systemInstruction"],we(o,P(o,f)));let d=s(n,["tools"]);e!==void 0&&d!=null&&(Array.isArray(d)?i(e,["tools"],d.map(p=>Ct(o,p))):i(e,["tools"],d));let c=s(n,["toolConfig"]);return e!==void 0&&c!=null&&i(e,["toolConfig"],Et(o,c)),t}function _t(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["model"],wn(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],vt(o,r,e)),e}function It(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["_url","name"],D(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],r),e}function At(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["_url","name"],D(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],r),e}function Mt(o,n,e){let t={},r=s(n,["ttl"]);e!==void 0&&r!=null&&i(e,["ttl"],r);let l=s(n,["expireTime"]);return e!==void 0&&l!=null&&i(e,["expireTime"],l),t}function St(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["_url","name"],D(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],Mt(o,r,e)),e}function Pt(o,n,e){let t={},r=s(n,["pageSize"]);e!==void 0&&r!=null&&i(e,["_query","pageSize"],r);let l=s(n,["pageToken"]);return e!==void 0&&l!=null&&i(e,["_query","pageToken"],l),t}function Rt(o,n){let e={},t=s(n,["config"]);return t!=null&&i(e,["config"],Pt(o,t,e)),e}function J(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["name"],t);let r=s(n,["displayName"]);r!=null&&i(e,["displayName"],r);let l=s(n,["model"]);l!=null&&i(e,["model"],l);let a=s(n,["createTime"]);a!=null&&i(e,["createTime"],a);let u=s(n,["updateTime"]);u!=null&&i(e,["updateTime"],u);let f=s(n,["expireTime"]);f!=null&&i(e,["expireTime"],f);let d=s(n,["usageMetadata"]);return d!=null&&i(e,["usageMetadata"],d),e}function xt(){return{}}function Nt(o,n){let e={},t=s(n,["nextPageToken"]);t!=null&&i(e,["nextPageToken"],t);let r=s(n,["cachedContents"]);return r!=null&&(Array.isArray(r)?i(e,["cachedContents"],r.map(l=>J(o,l))):i(e,["cachedContents"],r)),e}function O(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["name"],t);let r=s(n,["displayName"]);r!=null&&i(e,["displayName"],r);let l=s(n,["model"]);l!=null&&i(e,["model"],l);let a=s(n,["createTime"]);a!=null&&i(e,["createTime"],a);let u=s(n,["updateTime"]);u!=null&&i(e,["updateTime"],u);let f=s(n,["expireTime"]);f!=null&&i(e,["expireTime"],f);let d=s(n,["usageMetadata"]);return d!=null&&i(e,["usageMetadata"],d),e}function wt(){return{}}function Dt(o,n){let e={},t=s(n,["nextPageToken"]);t!=null&&i(e,["nextPageToken"],t);let r=s(n,["cachedContents"]);return r!=null&&(Array.isArray(r)?i(e,["cachedContents"],r.map(l=>O(o,l))):i(e,["cachedContents"],r)),e}var z;(function(o){o.PAGED_ITEM_BATCH_JOBS="batchJobs",o.PAGED_ITEM_MODELS="models",o.PAGED_ITEM_TUNING_JOBS="tuningJobs",o.PAGED_ITEM_FILES="files",o.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(z||(z={}));var X=class{constructor(n,e,t,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(n,t,r)}init(n,e,t){var r,l;this.nameInternal=n,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};t?typeof t=="object"?a=Object.assign({},t):a=t:a={config:{}},a.config&&(a.config.pageToken=e.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(n){this.init(this.nameInternal,n,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(n){return this.pageInternal[n]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let n=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:n,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let n=await this.requestInternal(this.params);return this.initNextPage(n),this.page}hasNextPage(){var n;return((n=this.params.config)===null||n===void 0?void 0:n.pageToken)!==void 0}};var De;(function(o){o.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",o.OUTCOME_OK="OUTCOME_OK",o.OUTCOME_FAILED="OUTCOME_FAILED",o.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(De||(De={}));var Ve;(function(o){o.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",o.PYTHON="PYTHON"})(Ve||(Ve={}));var Ue;(function(o){o.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",o.STRING="STRING",o.NUMBER="NUMBER",o.INTEGER="INTEGER",o.BOOLEAN="BOOLEAN",o.ARRAY="ARRAY",o.OBJECT="OBJECT"})(Ue||(Ue={}));var Fe;(function(o){o.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",o.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",o.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",o.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",o.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Fe||(Fe={}));var Le;(function(o){o.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",o.SEVERITY="SEVERITY",o.PROBABILITY="PROBABILITY"})(Le||(Le={}));var ke;(function(o){o.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE",o.OFF="OFF"})(ke||(ke={}));var Ge;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(Ge||(Ge={}));var qe;(function(o){o.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",o.STOP="STOP",o.MAX_TOKENS="MAX_TOKENS",o.SAFETY="SAFETY",o.RECITATION="RECITATION",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.SPII="SPII",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.IMAGE_SAFETY="IMAGE_SAFETY"})(qe||(qe={}));var He;(function(o){o.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",o.NEGLIGIBLE="NEGLIGIBLE",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH"})(He||(He={}));var Be;(function(o){o.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",o.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",o.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",o.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",o.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Be||(Be={}));var Ye;(function(o){o.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Ye||(Ye={}));var $e;(function(o){o.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",o.ON_DEMAND="ON_DEMAND",o.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($e||($e={}));var Ke;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.AUDIO="AUDIO"})(Ke||(Ke={}));var We;(function(o){o.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",o.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",o.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",o.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(We||(We={}));var Je;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(Je||(Je={}));var Oe;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.AUTO="AUTO",o.ANY="ANY",o.NONE="NONE"})(Oe||(Oe={}));var ze;(function(o){o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE"})(ze||(ze={}));var Xe;(function(o){o.DONT_ALLOW="DONT_ALLOW",o.ALLOW_ADULT="ALLOW_ADULT",o.ALLOW_ALL="ALLOW_ALL"})(Xe||(Xe={}));var Qe;(function(o){o.auto="auto",o.en="en",o.ja="ja",o.ko="ko",o.hi="hi"})(Qe||(Qe={}));var Ze;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.PROCESSING="PROCESSING",o.ACTIVE="ACTIVE",o.FAILED="FAILED"})(Ze||(Ze={}));var be;(function(o){o.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",o.UPLOADED="UPLOADED",o.GENERATED="GENERATED"})(be||(be={}));var je;(function(o){o.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",o.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",o.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",o.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",o.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(je||(je={}));var en;(function(o){o.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",o.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",o.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",o.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(en||(en={}));var nn;(function(o){o.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",o.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",o.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",o.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(nn||(nn={}));var tn;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.VIDEO="VIDEO",o.AUDIO="AUDIO",o.DOCUMENT="DOCUMENT"})(tn||(tn={}));var on;(function(o){o.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",o.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",o.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(on||(on={}));var sn;(function(o){o.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",o.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",o.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(sn||(sn={}));var rn;(function(o){o.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",o.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",o.NO_INTERRUPTION="NO_INTERRUPTION"})(rn||(rn={}));var ln;(function(o){o.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",o.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",o.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ln||(ln={}));var un=class{};function _s(o,n){return{fileData:{fileUri:o,mimeType:n}}}function an(o){return{text:o}}function Is(o,n){return{functionCall:{name:o,args:n}}}function As(o,n,e){return{functionResponse:{id:o,name:n,response:e}}}function Ms(o,n){return{inlineData:{data:o,mimeType:n}}}function Ss(o,n){return{codeExecutionResult:{outcome:o,output:n}}}function Ps(o,n){return{executableCode:{code:o,language:n}}}function fn(o){return typeof o=="object"&&o!==null?"fileData"in o||"text"in o||"functionCall"in o||"functionResponse"in o||"inlineData"in o||"videoMetadata"in o||"codeExecutionResult"in o||"executableCode"in o:!1}function qn(o){let n=[];if(typeof o=="string")n.push(an(o));else if(fn(o))n.push(o);else if(Array.isArray(o)){if(o.length===0)throw new Error("partOrString cannot be an empty array");for(let e of o)if(typeof e=="string")n.push(an(e));else if(fn(e))n.push(e);else throw new Error("element in PartUnion must be a Part object or string")}else throw new Error("partOrString must be a Part object, string, or array");return n}function Rs(o){return{role:"user",parts:qn(o)}}function xs(o){return{role:"model",parts:qn(o)}}var dn=class{},cn=class{},L=class{get text(){var n,e,t,r,l,a,u,f;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",c=!1,p=[];for(let h of(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(let[m,g]of Object.entries(h))m!=="text"&&m!=="thought"&&(g!==null||g!==void 0)&&p.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;c=!0,d+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?d:void 0}get functionCalls(){var n,e,t,r,l,a,u,f;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let d=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(c=>c.functionCall).map(c=>c.functionCall).filter(c=>c!==void 0);if(d?.length!==0)return d}get executableCode(){var n,e,t,r,l,a,u,f,d;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let c=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(c?.length!==0)return(d=c?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var n,e,t,r,l,a,u,f,d;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let c=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(c?.length!==0)return(d=c?.[0])===null||d===void 0?void 0:d.output}},Q=class{},Z=class{},b=class{},se=class{},pn=class{},j=class{},ee=class{},re=class{},ne=class{constructor(n){let e={};for(let t of n.headers.entries())e[t[0]]=t[1];this.headers=e,this.responseInternal=n}json(){return this.responseInternal.json()}},le=class{},ue=class{},mn=class{},hn=class{},gn=class{constructor(){this.functionResponses=[]}};var ae=class extends G{constructor(n){super(),this.apiClient=n,this.list=async(e={})=>new X(z.PAGED_ITEM_CACHED_CONTENTS,t=>this.listInternal(t),await this.listInternal(e),e)}async create(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=_t(this.apiClient,n);return l=E("cachedContents",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>O(this.apiClient,f))}else{let u=st(this.apiClient,n);return l=E("cachedContents",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>J(this.apiClient,f))}}async get(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=It(this.apiClient,n);return l=E("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>O(this.apiClient,f))}else{let u=rt(this.apiClient,n);return l=E("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>J(this.apiClient,f))}}async delete(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=At(this.apiClient,n);return l=E("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(()=>{let f=wt(),d=new j;return Object.assign(d,f),d})}else{let u=lt(this.apiClient,n);return l=E("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(()=>{let f=xt(),d=new j;return Object.assign(d,f),d})}}async update(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=St(this.apiClient,n);return l=E("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>O(this.apiClient,f))}else{let u=at(this.apiClient,n);return l=E("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>J(this.apiClient,f))}}async listInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=Rt(this.apiClient,n);return l=E("cachedContents",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>{let d=Dt(this.apiClient,f),c=new ee;return Object.assign(c,d),c})}else{let u=dt(this.apiClient,n);return l=E("cachedContents",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>{let d=Nt(this.apiClient,f),c=new ee;return Object.assign(c,d),c})}}};function yn(o){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&o[n],t=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&t>=o.length&&(o=void 0),{value:o&&o[t++],done:!o}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function M(o){return this instanceof M?(this.v=o,this):new M(o)}function te(o,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e.apply(o,n||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(m){return function(g){return Promise.resolve(g).then(m,p)}}function u(m,g){t[m]&&(r[m]=function(y){return new Promise(function(C,v){l.push([m,y,C,v])>1||f(m,y)})},g&&(r[m]=g(r[m])))}function f(m,g){try{d(t[m](g))}catch(y){h(l[0][3],y)}}function d(m){m.value instanceof M?Promise.resolve(m.value.v).then(c,p):h(l[0][2],m)}function c(m){f("next",m)}function p(m){f("throw",m)}function h(m,g){m(g),l.shift(),l.length&&f(l[0][0],l[0][1])}}function fe(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=o[Symbol.asyncIterator],e;return n?n.call(o):(o=typeof yn=="function"?yn(o):o[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(l){e[l]=o[l]&&function(a){return new Promise(function(u,f){a=o[l](a),r(u,f,a.done,a.value)})}}function r(l,a,u,f){Promise.resolve(f).then(function(d){l({value:d,done:u})},a)}}function Vt(o){var n;if(o.candidates==null||o.candidates.length===0)return!1;let e=(n=o.candidates[0])===null||n===void 0?void 0:n.content;return e===void 0?!1:Hn(e)}function Hn(o){if(o.parts===void 0||o.parts.length===0)return!1;for(let n of o.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}function Ut(o){if(o.length!==0){if(o[0].role!=="user")throw new Error("History must start with a user turn.");for(let n of o)if(n.role!=="user"&&n.role!=="model")throw new Error(`Role must be user or model, but got ${n.role}.`)}}function Ft(o){if(o===void 0||o.length===0)return[];let n=[],e=o.length,t=0,r=o[0];for(;t<e;)if(o[t].role==="user")r=o[t],t++;else{let l=[],a=!0;for(;t<e&&o[t].role==="model";)l.push(o[t]),a&&!Hn(o[t])&&(a=!1),t++;a&&(n.push(r),n.push(...l))}return n}var de=class{constructor(n,e){this.modelsModule=n,this.apiClient=e}create(n){return new ce(this.apiClient,this.modelsModule,n.model,n.config,n.history)}},ce=class{constructor(n,e,t,r={},l=[]){this.apiClient=n,this.modelsModule=e,this.model=t,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Ut(l)}async sendMessage(n){var e;await this.sendPromise;let t=P(this.apiClient,n.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(t),config:(e=n.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var l,a;let f=(a=(l=(await r).candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,d=f?[f]:[];this.recordHistory(t,d)})(),await this.sendPromise,r}async sendMessageStream(n){var e;await this.sendPromise;let t=P(this.apiClient,n.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(t),config:(e=n.config)!==null&&e!==void 0?e:this.config});this.sendPromise=r.then(()=>{});let l=await r;return this.processStreamResponse(l,t)}getHistory(n=!1){return n?Ft(this.history):this.history}processStreamResponse(n,e){var t,r;return te(this,arguments,function*(){var a,u,f,d;let c=[];try{for(var p=!0,h=fe(n),m;m=yield M(h.next()),a=m.done,!a;p=!0){d=m.value,p=!1;let g=d;if(Vt(g)){let y=(r=(t=g.candidates)===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.content;y!==void 0&&c.push(y)}yield yield M(g)}}catch(g){u={error:g}}finally{try{!p&&!a&&(f=h.return)&&(yield M(f.call(h)))}finally{if(u)throw u.error}}this.recordHistory(e,c)})}recordHistory(n,e){let t=[];e.length>0&&e.every(r=>r.role==="model")?t=e:t.push({role:"model",parts:[]}),this.history.push(n),this.history.push(...t)}};function Lt(o,n,e){let t={},r=s(n,["pageSize"]);e!==void 0&&r!=null&&i(e,["_query","pageSize"],r);let l=s(n,["pageToken"]);return e!==void 0&&l!=null&&i(e,["_query","pageToken"],l),t}function kt(o,n){let e={},t=s(n,["config"]);return t!=null&&i(e,["config"],Lt(o,t,e)),e}function Gt(o,n){let e={},t=s(n,["details"]);t!=null&&i(e,["details"],t);let r=s(n,["message"]);r!=null&&i(e,["message"],r);let l=s(n,["code"]);return l!=null&&i(e,["code"],l),e}function qt(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["name"],t);let r=s(n,["displayName"]);r!=null&&i(e,["displayName"],r);let l=s(n,["mimeType"]);l!=null&&i(e,["mimeType"],l);let a=s(n,["sizeBytes"]);a!=null&&i(e,["sizeBytes"],a);let u=s(n,["createTime"]);u!=null&&i(e,["createTime"],u);let f=s(n,["expirationTime"]);f!=null&&i(e,["expirationTime"],f);let d=s(n,["updateTime"]);d!=null&&i(e,["updateTime"],d);let c=s(n,["sha256Hash"]);c!=null&&i(e,["sha256Hash"],c);let p=s(n,["uri"]);p!=null&&i(e,["uri"],p);let h=s(n,["downloadUri"]);h!=null&&i(e,["downloadUri"],h);let m=s(n,["state"]);m!=null&&i(e,["state"],m);let g=s(n,["source"]);g!=null&&i(e,["source"],g);let y=s(n,["videoMetadata"]);y!=null&&i(e,["videoMetadata"],y);let C=s(n,["error"]);return C!=null&&i(e,["error"],Gt(o,C)),e}function Ht(o,n){let e={},t=s(n,["file"]);t!=null&&i(e,["file"],qt(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],r),e}function Bt(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["_url","file"],Gn(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],r),e}function Yt(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["_url","file"],Gn(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],r),e}function $t(o,n){let e={},t=s(n,["details"]);t!=null&&i(e,["details"],t);let r=s(n,["message"]);r!=null&&i(e,["message"],r);let l=s(n,["code"]);return l!=null&&i(e,["code"],l),e}function pe(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["name"],t);let r=s(n,["displayName"]);r!=null&&i(e,["displayName"],r);let l=s(n,["mimeType"]);l!=null&&i(e,["mimeType"],l);let a=s(n,["sizeBytes"]);a!=null&&i(e,["sizeBytes"],a);let u=s(n,["createTime"]);u!=null&&i(e,["createTime"],u);let f=s(n,["expirationTime"]);f!=null&&i(e,["expirationTime"],f);let d=s(n,["updateTime"]);d!=null&&i(e,["updateTime"],d);let c=s(n,["sha256Hash"]);c!=null&&i(e,["sha256Hash"],c);let p=s(n,["uri"]);p!=null&&i(e,["uri"],p);let h=s(n,["downloadUri"]);h!=null&&i(e,["downloadUri"],h);let m=s(n,["state"]);m!=null&&i(e,["state"],m);let g=s(n,["source"]);g!=null&&i(e,["source"],g);let y=s(n,["videoMetadata"]);y!=null&&i(e,["videoMetadata"],y);let C=s(n,["error"]);return C!=null&&i(e,["error"],$t(o,C)),e}function Kt(o,n){let e={},t=s(n,["nextPageToken"]);t!=null&&i(e,["nextPageToken"],t);let r=s(n,["files"]);return r!=null&&(Array.isArray(r)?i(e,["files"],r.map(l=>pe(o,l))):i(e,["files"],r)),e}function Wt(o,n){let e={},t=s(n,["httpHeaders"]);return t!=null&&i(e,["httpHeaders"],t),e}function Jt(){return{}}var me=class extends G{constructor(n){super(),this.apiClient=n,this.list=async(e={})=>new X(z.PAGED_ITEM_FILES,t=>this.listInternal(t),await this.listInternal(e),e)}async upload(n){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(n.file,n.config).then(e=>pe(this.apiClient,e))}async listInternal(n){var e;let t,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=kt(this.apiClient,n);return r=E("files",a._url),l=a._query,delete a.config,delete a._url,delete a._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(u=>u.json()),t.then(u=>{let f=Kt(this.apiClient,u),d=new re;return Object.assign(d,f),d})}}async createInternal(n){var e;let t,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Ht(this.apiClient,n);return r=E("upload/v1beta/files",a._url),l=a._query,delete a.config,delete a._url,delete a._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(u=>u.json()),t.then(u=>{let f=Wt(this.apiClient,u),d=new le;return Object.assign(d,f),d})}}async get(n){var e;let t,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Bt(this.apiClient,n);return r=E("files/{file}",a._url),l=a._query,delete a.config,delete a._url,delete a._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(u=>u.json()),t.then(u=>pe(this.apiClient,u))}}async delete(n){var e;let t,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Yt(this.apiClient,n);return r=E("files/{file}",a._url),l=a._query,delete a.config,delete a._url,delete a._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(u=>u.json()),t.then(()=>{let u=Jt(),f=new ue;return Object.assign(f,u),f})}}};function Ot(o,n){let e={};if(s(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");let t=s(n,["thought"]);t!=null&&i(e,["thought"],t);let r=s(n,["codeExecutionResult"]);r!=null&&i(e,["codeExecutionResult"],r);let l=s(n,["executableCode"]);l!=null&&i(e,["executableCode"],l);let a=s(n,["fileData"]);a!=null&&i(e,["fileData"],a);let u=s(n,["functionCall"]);u!=null&&i(e,["functionCall"],u);let f=s(n,["functionResponse"]);f!=null&&i(e,["functionResponse"],f);let d=s(n,["inlineData"]);d!=null&&i(e,["inlineData"],d);let c=s(n,["text"]);return c!=null&&i(e,["text"],c),e}function B(o,n){let e={},t=s(n,["parts"]);t!=null&&(Array.isArray(t)?i(e,["parts"],t.map(l=>Ot(o,l))):i(e,["parts"],t));let r=s(n,["role"]);return r!=null&&i(e,["role"],r),e}function zt(o,n){let e={};if(s(n,["example"])!==void 0)throw new Error("example parameter is not supported in Gemini API.");if(s(n,["pattern"])!==void 0)throw new Error("pattern parameter is not supported in Gemini API.");if(s(n,["default"])!==void 0)throw new Error("default parameter is not supported in Gemini API.");if(s(n,["maxLength"])!==void 0)throw new Error("maxLength parameter is not supported in Gemini API.");if(s(n,["minLength"])!==void 0)throw new Error("minLength parameter is not supported in Gemini API.");if(s(n,["minProperties"])!==void 0)throw new Error("minProperties parameter is not supported in Gemini API.");if(s(n,["maxProperties"])!==void 0)throw new Error("maxProperties parameter is not supported in Gemini API.");let t=s(n,["anyOf"]);t!=null&&i(e,["anyOf"],t);let r=s(n,["description"]);r!=null&&i(e,["description"],r);let l=s(n,["enum"]);l!=null&&i(e,["enum"],l);let a=s(n,["format"]);a!=null&&i(e,["format"],a);let u=s(n,["items"]);u!=null&&i(e,["items"],u);let f=s(n,["maxItems"]);f!=null&&i(e,["maxItems"],f);let d=s(n,["maximum"]);d!=null&&i(e,["maximum"],d);let c=s(n,["minItems"]);c!=null&&i(e,["minItems"],c);let p=s(n,["minimum"]);p!=null&&i(e,["minimum"],p);let h=s(n,["nullable"]);h!=null&&i(e,["nullable"],h);let m=s(n,["properties"]);m!=null&&i(e,["properties"],m);let g=s(n,["propertyOrdering"]);g!=null&&i(e,["propertyOrdering"],g);let y=s(n,["required"]);y!=null&&i(e,["required"],y);let C=s(n,["title"]);C!=null&&i(e,["title"],C);let v=s(n,["type"]);return v!=null&&i(e,["type"],v),e}function Xt(o,n){let e={};if(s(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let t=s(n,["category"]);t!=null&&i(e,["category"],t);let r=s(n,["threshold"]);return r!=null&&i(e,["threshold"],r),e}function Qt(o,n){let e={};if(s(n,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");let t=s(n,["description"]);t!=null&&i(e,["description"],t);let r=s(n,["name"]);r!=null&&i(e,["name"],r);let l=s(n,["parameters"]);return l!=null&&i(e,["parameters"],l),e}function Zt(){return{}}function bt(o,n){let e={},t=s(n,["mode"]);t!=null&&i(e,["mode"],t);let r=s(n,["dynamicThreshold"]);return r!=null&&i(e,["dynamicThreshold"],r),e}function jt(o,n){let e={},t=s(n,["dynamicRetrievalConfig"]);return t!=null&&i(e,["dynamicRetrievalConfig"],bt(o,t)),e}function Bn(o,n){let e={},t=s(n,["functionDeclarations"]);if(t!=null&&(Array.isArray(t)?i(e,["functionDeclarations"],t.map(u=>Qt(o,u))):i(e,["functionDeclarations"],t)),s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");s(n,["googleSearch"])!=null&&i(e,["googleSearch"],Zt());let l=s(n,["googleSearchRetrieval"]);l!=null&&i(e,["googleSearchRetrieval"],jt(o,l));let a=s(n,["codeExecution"]);return a!=null&&i(e,["codeExecution"],a),e}function eo(o,n){let e={},t=s(n,["mode"]);t!=null&&i(e,["mode"],t);let r=s(n,["allowedFunctionNames"]);return r!=null&&i(e,["allowedFunctionNames"],r),e}function no(o,n){let e={},t=s(n,["functionCallingConfig"]);return t!=null&&i(e,["functionCallingConfig"],eo(o,t)),e}function to(o,n){let e={},t=s(n,["voiceName"]);return t!=null&&i(e,["voiceName"],t),e}function oo(o,n){let e={},t=s(n,["prebuiltVoiceConfig"]);return t!=null&&i(e,["prebuiltVoiceConfig"],to(o,t)),e}function io(o,n){let e={},t=s(n,["voiceConfig"]);return t!=null&&i(e,["voiceConfig"],oo(o,t)),e}function so(o,n){let e={},t=s(n,["includeThoughts"]);t!=null&&i(e,["includeThoughts"],t);let r=s(n,["thinkingBudget"]);return r!=null&&i(e,["thinkingBudget"],r),e}function ro(o,n,e){let t={},r=s(n,["systemInstruction"]);e!==void 0&&r!=null&&i(e,["systemInstruction"],B(o,P(o,r)));let l=s(n,["temperature"]);l!=null&&i(t,["temperature"],l);let a=s(n,["topP"]);a!=null&&i(t,["topP"],a);let u=s(n,["topK"]);u!=null&&i(t,["topK"],u);let f=s(n,["candidateCount"]);f!=null&&i(t,["candidateCount"],f);let d=s(n,["maxOutputTokens"]);d!=null&&i(t,["maxOutputTokens"],d);let c=s(n,["stopSequences"]);c!=null&&i(t,["stopSequences"],c);let p=s(n,["responseLogprobs"]);p!=null&&i(t,["responseLogprobs"],p);let h=s(n,["logprobs"]);h!=null&&i(t,["logprobs"],h);let m=s(n,["presencePenalty"]);m!=null&&i(t,["presencePenalty"],m);let g=s(n,["frequencyPenalty"]);g!=null&&i(t,["frequencyPenalty"],g);let y=s(n,["seed"]);y!=null&&i(t,["seed"],y);let C=s(n,["responseMimeType"]);C!=null&&i(t,["responseMimeType"],C);let v=s(n,["responseSchema"]);if(v!=null&&i(t,["responseSchema"],zt(o,Fn(o,v))),s(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");let T=s(n,["safetySettings"]);e!==void 0&&T!=null&&(Array.isArray(T)?i(e,["safetySettings"],T.map(F=>Xt(o,F))):i(e,["safetySettings"],T));let _=s(n,["tools"]);e!==void 0&&_!=null&&(Array.isArray(_)?i(e,["tools"],k(o,k(o,_).map(F=>Bn(o,kn(o,F))))):i(e,["tools"],k(o,_)));let S=s(n,["toolConfig"]);if(e!==void 0&&S!=null&&i(e,["toolConfig"],no(o,S)),s(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let R=s(n,["cachedContent"]);e!==void 0&&R!=null&&i(e,["cachedContent"],D(o,R));let x=s(n,["responseModalities"]);x!=null&&i(t,["responseModalities"],x);let N=s(n,["mediaResolution"]);N!=null&&i(t,["mediaResolution"],N);let w=s(n,["speechConfig"]);if(w!=null&&i(t,["speechConfig"],io(o,Ln(o,w))),s(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let q=s(n,["thinkingConfig"]);return q!=null&&i(t,["thinkingConfig"],so(o,q)),t}function Cn(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","model"],A(o,t));let r=s(n,["contents"]);r!=null&&(Array.isArray(r)?i(e,["contents"],I(o,I(o,r).map(a=>B(o,a)))):i(e,["contents"],I(o,r)));let l=s(n,["config"]);return l!=null&&i(e,["generationConfig"],ro(o,l,e)),e}function lo(o,n,e){let t={},r=s(n,["taskType"]);e!==void 0&&r!=null&&i(e,["requests[]","taskType"],r);let l=s(n,["title"]);e!==void 0&&l!=null&&i(e,["requests[]","title"],l);let a=s(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&i(e,["requests[]","outputDimensionality"],a),s(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function uo(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","model"],A(o,t));let r=s(n,["contents"]);r!=null&&i(e,["requests[]","content"],Un(o,r));let l=s(n,["config"]);l!=null&&i(e,["config"],lo(o,l,e));let a=s(n,["model"]);return a!==void 0&&i(e,["requests[]","model"],A(o,a)),e}function ao(o,n,e){let t={};if(s(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let r=s(n,["numberOfImages"]);e!==void 0&&r!=null&&i(e,["parameters","sampleCount"],r);let l=s(n,["aspectRatio"]);e!==void 0&&l!=null&&i(e,["parameters","aspectRatio"],l);let a=s(n,["guidanceScale"]);if(e!==void 0&&a!=null&&i(e,["parameters","guidanceScale"],a),s(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let u=s(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&i(e,["parameters","safetySetting"],u);let f=s(n,["personGeneration"]);e!==void 0&&f!=null&&i(e,["parameters","personGeneration"],f);let d=s(n,["includeSafetyAttributes"]);e!==void 0&&d!=null&&i(e,["parameters","includeSafetyAttributes"],d);let c=s(n,["includeRaiReason"]);e!==void 0&&c!=null&&i(e,["parameters","includeRaiReason"],c);let p=s(n,["language"]);e!==void 0&&p!=null&&i(e,["parameters","language"],p);let h=s(n,["outputMimeType"]);e!==void 0&&h!=null&&i(e,["parameters","outputOptions","mimeType"],h);let m=s(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&i(e,["parameters","outputOptions","compressionQuality"],m),s(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(s(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function fo(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","model"],A(o,t));let r=s(n,["prompt"]);r!=null&&i(e,["instances[0]","prompt"],r);let l=s(n,["config"]);return l!=null&&i(e,["config"],ao(o,l,e)),e}function co(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","name"],A(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],r),e}function po(o,n){let e={};if(s(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function mo(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","model"],A(o,t));let r=s(n,["contents"]);r!=null&&(Array.isArray(r)?i(e,["contents"],I(o,I(o,r).map(a=>B(o,a)))):i(e,["contents"],I(o,r)));let l=s(n,["config"]);return l!=null&&i(e,["config"],po(o,l)),e}function ho(o,n){let e={};if(s(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let t=s(n,["imageBytes"]);t!=null&&i(e,["bytesBase64Encoded"],V(o,t));let r=s(n,["mimeType"]);return r!=null&&i(e,["mimeType"],r),e}function go(o,n,e){let t={},r=s(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&i(e,["parameters","sampleCount"],r),s(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let l=s(n,["durationSeconds"]);if(e!==void 0&&l!=null&&i(e,["parameters","durationSeconds"],l),s(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=s(n,["aspectRatio"]);if(e!==void 0&&a!=null&&i(e,["parameters","aspectRatio"],a),s(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");let u=s(n,["personGeneration"]);if(e!==void 0&&u!=null&&i(e,["parameters","personGeneration"],u),s(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let f=s(n,["negativePrompt"]);if(e!==void 0&&f!=null&&i(e,["parameters","negativePrompt"],f),s(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function yo(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","model"],A(o,t));let r=s(n,["prompt"]);r!=null&&i(e,["instances[0]","prompt"],r);let l=s(n,["image"]);l!=null&&i(e,["instances[0]","image"],ho(o,l));let a=s(n,["config"]);return a!=null&&i(e,["config"],go(o,a,e)),e}function Co(o,n){let e={},t=s(n,["videoMetadata"]);t!=null&&i(e,["videoMetadata"],t);let r=s(n,["thought"]);r!=null&&i(e,["thought"],r);let l=s(n,["codeExecutionResult"]);l!=null&&i(e,["codeExecutionResult"],l);let a=s(n,["executableCode"]);a!=null&&i(e,["executableCode"],a);let u=s(n,["fileData"]);u!=null&&i(e,["fileData"],u);let f=s(n,["functionCall"]);f!=null&&i(e,["functionCall"],f);let d=s(n,["functionResponse"]);d!=null&&i(e,["functionResponse"],d);let c=s(n,["inlineData"]);c!=null&&i(e,["inlineData"],c);let p=s(n,["text"]);return p!=null&&i(e,["text"],p),e}function U(o,n){let e={},t=s(n,["parts"]);t!=null&&(Array.isArray(t)?i(e,["parts"],t.map(l=>Co(o,l))):i(e,["parts"],t));let r=s(n,["role"]);return r!=null&&i(e,["role"],r),e}function Yn(o,n){let e={},t=s(n,["example"]);t!=null&&i(e,["example"],t);let r=s(n,["pattern"]);r!=null&&i(e,["pattern"],r);let l=s(n,["default"]);l!=null&&i(e,["default"],l);let a=s(n,["maxLength"]);a!=null&&i(e,["maxLength"],a);let u=s(n,["minLength"]);u!=null&&i(e,["minLength"],u);let f=s(n,["minProperties"]);f!=null&&i(e,["minProperties"],f);let d=s(n,["maxProperties"]);d!=null&&i(e,["maxProperties"],d);let c=s(n,["anyOf"]);c!=null&&i(e,["anyOf"],c);let p=s(n,["description"]);p!=null&&i(e,["description"],p);let h=s(n,["enum"]);h!=null&&i(e,["enum"],h);let m=s(n,["format"]);m!=null&&i(e,["format"],m);let g=s(n,["items"]);g!=null&&i(e,["items"],g);let y=s(n,["maxItems"]);y!=null&&i(e,["maxItems"],y);let C=s(n,["maximum"]);C!=null&&i(e,["maximum"],C);let v=s(n,["minItems"]);v!=null&&i(e,["minItems"],v);let T=s(n,["minimum"]);T!=null&&i(e,["minimum"],T);let _=s(n,["nullable"]);_!=null&&i(e,["nullable"],_);let S=s(n,["properties"]);S!=null&&i(e,["properties"],S);let R=s(n,["propertyOrdering"]);R!=null&&i(e,["propertyOrdering"],R);let x=s(n,["required"]);x!=null&&i(e,["required"],x);let N=s(n,["title"]);N!=null&&i(e,["title"],N);let w=s(n,["type"]);return w!=null&&i(e,["type"],w),e}function To(o,n){let e={},t=s(n,["method"]);t!=null&&i(e,["method"],t);let r=s(n,["category"]);r!=null&&i(e,["category"],r);let l=s(n,["threshold"]);return l!=null&&i(e,["threshold"],l),e}function Eo(o,n){let e={},t=s(n,["response"]);t!=null&&i(e,["response"],Yn(o,t));let r=s(n,["description"]);r!=null&&i(e,["description"],r);let l=s(n,["name"]);l!=null&&i(e,["name"],l);let a=s(n,["parameters"]);return a!=null&&i(e,["parameters"],a),e}function vo(){return{}}function _o(o,n){let e={},t=s(n,["mode"]);t!=null&&i(e,["mode"],t);let r=s(n,["dynamicThreshold"]);return r!=null&&i(e,["dynamicThreshold"],r),e}function Io(o,n){let e={},t=s(n,["dynamicRetrievalConfig"]);return t!=null&&i(e,["dynamicRetrievalConfig"],_o(o,t)),e}function Se(o,n){let e={},t=s(n,["functionDeclarations"]);t!=null&&(Array.isArray(t)?i(e,["functionDeclarations"],t.map(f=>Eo(o,f))):i(e,["functionDeclarations"],t));let r=s(n,["retrieval"]);r!=null&&i(e,["retrieval"],r),s(n,["googleSearch"])!=null&&i(e,["googleSearch"],vo());let a=s(n,["googleSearchRetrieval"]);a!=null&&i(e,["googleSearchRetrieval"],Io(o,a));let u=s(n,["codeExecution"]);return u!=null&&i(e,["codeExecution"],u),e}function Ao(o,n){let e={},t=s(n,["mode"]);t!=null&&i(e,["mode"],t);let r=s(n,["allowedFunctionNames"]);return r!=null&&i(e,["allowedFunctionNames"],r),e}function Mo(o,n){let e={},t=s(n,["functionCallingConfig"]);return t!=null&&i(e,["functionCallingConfig"],Ao(o,t)),e}function So(o,n){let e={},t=s(n,["voiceName"]);return t!=null&&i(e,["voiceName"],t),e}function Po(o,n){let e={},t=s(n,["prebuiltVoiceConfig"]);return t!=null&&i(e,["prebuiltVoiceConfig"],So(o,t)),e}function Ro(o,n){let e={},t=s(n,["voiceConfig"]);return t!=null&&i(e,["voiceConfig"],Po(o,t)),e}function xo(o,n){let e={},t=s(n,["includeThoughts"]);t!=null&&i(e,["includeThoughts"],t);let r=s(n,["thinkingBudget"]);return r!=null&&i(e,["thinkingBudget"],r),e}function No(o,n,e){let t={},r=s(n,["systemInstruction"]);e!==void 0&&r!=null&&i(e,["systemInstruction"],U(o,P(o,r)));let l=s(n,["temperature"]);l!=null&&i(t,["temperature"],l);let a=s(n,["topP"]);a!=null&&i(t,["topP"],a);let u=s(n,["topK"]);u!=null&&i(t,["topK"],u);let f=s(n,["candidateCount"]);f!=null&&i(t,["candidateCount"],f);let d=s(n,["maxOutputTokens"]);d!=null&&i(t,["maxOutputTokens"],d);let c=s(n,["stopSequences"]);c!=null&&i(t,["stopSequences"],c);let p=s(n,["responseLogprobs"]);p!=null&&i(t,["responseLogprobs"],p);let h=s(n,["logprobs"]);h!=null&&i(t,["logprobs"],h);let m=s(n,["presencePenalty"]);m!=null&&i(t,["presencePenalty"],m);let g=s(n,["frequencyPenalty"]);g!=null&&i(t,["frequencyPenalty"],g);let y=s(n,["seed"]);y!=null&&i(t,["seed"],y);let C=s(n,["responseMimeType"]);C!=null&&i(t,["responseMimeType"],C);let v=s(n,["responseSchema"]);v!=null&&i(t,["responseSchema"],Yn(o,Fn(o,v)));let T=s(n,["routingConfig"]);T!=null&&i(t,["routingConfig"],T);let _=s(n,["safetySettings"]);e!==void 0&&_!=null&&(Array.isArray(_)?i(e,["safetySettings"],_.map(ie=>To(o,ie))):i(e,["safetySettings"],_));let S=s(n,["tools"]);e!==void 0&&S!=null&&(Array.isArray(S)?i(e,["tools"],k(o,k(o,S).map(ie=>Se(o,kn(o,ie))))):i(e,["tools"],k(o,S)));let R=s(n,["toolConfig"]);e!==void 0&&R!=null&&i(e,["toolConfig"],Mo(o,R));let x=s(n,["labels"]);e!==void 0&&x!=null&&i(e,["labels"],x);let N=s(n,["cachedContent"]);e!==void 0&&N!=null&&i(e,["cachedContent"],D(o,N));let w=s(n,["responseModalities"]);w!=null&&i(t,["responseModalities"],w);let q=s(n,["mediaResolution"]);q!=null&&i(t,["mediaResolution"],q);let F=s(n,["speechConfig"]);F!=null&&i(t,["speechConfig"],Ro(o,Ln(o,F)));let Pe=s(n,["audioTimestamp"]);Pe!=null&&i(t,["audioTimestamp"],Pe);let Re=s(n,["thinkingConfig"]);return Re!=null&&i(t,["thinkingConfig"],xo(o,Re)),t}function Tn(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","model"],A(o,t));let r=s(n,["contents"]);r!=null&&(Array.isArray(r)?i(e,["contents"],I(o,I(o,r).map(a=>U(o,a)))):i(e,["contents"],I(o,r)));let l=s(n,["config"]);return l!=null&&i(e,["generationConfig"],No(o,l,e)),e}function wo(o,n,e){let t={},r=s(n,["taskType"]);e!==void 0&&r!=null&&i(e,["instances[]","task_type"],r);let l=s(n,["title"]);e!==void 0&&l!=null&&i(e,["instances[]","title"],l);let a=s(n,["outputDimensionality"]);e!==void 0&&a!=null&&i(e,["parameters","outputDimensionality"],a);let u=s(n,["mimeType"]);e!==void 0&&u!=null&&i(e,["instances[]","mimeType"],u);let f=s(n,["autoTruncate"]);return e!==void 0&&f!=null&&i(e,["parameters","autoTruncate"],f),t}function Do(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","model"],A(o,t));let r=s(n,["contents"]);r!=null&&i(e,["instances[]","content"],Un(o,r));let l=s(n,["config"]);return l!=null&&i(e,["config"],wo(o,l,e)),e}function Vo(o,n,e){let t={},r=s(n,["outputGcsUri"]);e!==void 0&&r!=null&&i(e,["parameters","storageUri"],r);let l=s(n,["negativePrompt"]);e!==void 0&&l!=null&&i(e,["parameters","negativePrompt"],l);let a=s(n,["numberOfImages"]);e!==void 0&&a!=null&&i(e,["parameters","sampleCount"],a);let u=s(n,["aspectRatio"]);e!==void 0&&u!=null&&i(e,["parameters","aspectRatio"],u);let f=s(n,["guidanceScale"]);e!==void 0&&f!=null&&i(e,["parameters","guidanceScale"],f);let d=s(n,["seed"]);e!==void 0&&d!=null&&i(e,["parameters","seed"],d);let c=s(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&i(e,["parameters","safetySetting"],c);let p=s(n,["personGeneration"]);e!==void 0&&p!=null&&i(e,["parameters","personGeneration"],p);let h=s(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&i(e,["parameters","includeSafetyAttributes"],h);let m=s(n,["includeRaiReason"]);e!==void 0&&m!=null&&i(e,["parameters","includeRaiReason"],m);let g=s(n,["language"]);e!==void 0&&g!=null&&i(e,["parameters","language"],g);let y=s(n,["outputMimeType"]);e!==void 0&&y!=null&&i(e,["parameters","outputOptions","mimeType"],y);let C=s(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&i(e,["parameters","outputOptions","compressionQuality"],C);let v=s(n,["addWatermark"]);e!==void 0&&v!=null&&i(e,["parameters","addWatermark"],v);let T=s(n,["enhancePrompt"]);return e!==void 0&&T!=null&&i(e,["parameters","enhancePrompt"],T),t}function Uo(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","model"],A(o,t));let r=s(n,["prompt"]);r!=null&&i(e,["instances[0]","prompt"],r);let l=s(n,["config"]);return l!=null&&i(e,["config"],Vo(o,l,e)),e}function Fo(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","name"],A(o,t));let r=s(n,["config"]);return r!=null&&i(e,["config"],r),e}function Lo(o,n,e){let t={},r=s(n,["systemInstruction"]);e!==void 0&&r!=null&&i(e,["systemInstruction"],U(o,P(o,r)));let l=s(n,["tools"]);e!==void 0&&l!=null&&(Array.isArray(l)?i(e,["tools"],l.map(u=>Se(o,u))):i(e,["tools"],l));let a=s(n,["generationConfig"]);return e!==void 0&&a!=null&&i(e,["generationConfig"],a),t}function ko(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","model"],A(o,t));let r=s(n,["contents"]);r!=null&&(Array.isArray(r)?i(e,["contents"],I(o,I(o,r).map(a=>U(o,a)))):i(e,["contents"],I(o,r)));let l=s(n,["config"]);return l!=null&&i(e,["config"],Lo(o,l,e)),e}function Go(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","model"],A(o,t));let r=s(n,["contents"]);r!=null&&(Array.isArray(r)?i(e,["contents"],I(o,I(o,r).map(a=>U(o,a)))):i(e,["contents"],I(o,r)));let l=s(n,["config"]);return l!=null&&i(e,["config"],l),e}function qo(o,n){let e={},t=s(n,["gcsUri"]);t!=null&&i(e,["gcsUri"],t);let r=s(n,["imageBytes"]);r!=null&&i(e,["bytesBase64Encoded"],V(o,r));let l=s(n,["mimeType"]);return l!=null&&i(e,["mimeType"],l),e}function Ho(o,n,e){let t={},r=s(n,["numberOfVideos"]);e!==void 0&&r!=null&&i(e,["parameters","sampleCount"],r);let l=s(n,["outputGcsUri"]);e!==void 0&&l!=null&&i(e,["parameters","storageUri"],l);let a=s(n,["fps"]);e!==void 0&&a!=null&&i(e,["parameters","fps"],a);let u=s(n,["durationSeconds"]);e!==void 0&&u!=null&&i(e,["parameters","durationSeconds"],u);let f=s(n,["seed"]);e!==void 0&&f!=null&&i(e,["parameters","seed"],f);let d=s(n,["aspectRatio"]);e!==void 0&&d!=null&&i(e,["parameters","aspectRatio"],d);let c=s(n,["resolution"]);e!==void 0&&c!=null&&i(e,["parameters","resolution"],c);let p=s(n,["personGeneration"]);e!==void 0&&p!=null&&i(e,["parameters","personGeneration"],p);let h=s(n,["pubsubTopic"]);e!==void 0&&h!=null&&i(e,["parameters","pubsubTopic"],h);let m=s(n,["negativePrompt"]);e!==void 0&&m!=null&&i(e,["parameters","negativePrompt"],m);let g=s(n,["enhancePrompt"]);return e!==void 0&&g!=null&&i(e,["parameters","enhancePrompt"],g),t}function Bo(o,n){let e={},t=s(n,["model"]);t!=null&&i(e,["_url","model"],A(o,t));let r=s(n,["prompt"]);r!=null&&i(e,["instances[0]","prompt"],r);let l=s(n,["image"]);l!=null&&i(e,["instances[0]","image"],qo(o,l));let a=s(n,["config"]);return a!=null&&i(e,["config"],Ho(o,a,e)),e}function Yo(o,n){let e={},t=s(n,["thought"]);t!=null&&i(e,["thought"],t);let r=s(n,["codeExecutionResult"]);r!=null&&i(e,["codeExecutionResult"],r);let l=s(n,["executableCode"]);l!=null&&i(e,["executableCode"],l);let a=s(n,["fileData"]);a!=null&&i(e,["fileData"],a);let u=s(n,["functionCall"]);u!=null&&i(e,["functionCall"],u);let f=s(n,["functionResponse"]);f!=null&&i(e,["functionResponse"],f);let d=s(n,["inlineData"]);d!=null&&i(e,["inlineData"],d);let c=s(n,["text"]);return c!=null&&i(e,["text"],c),e}function $n(o,n){let e={},t=s(n,["parts"]);t!=null&&(Array.isArray(t)?i(e,["parts"],t.map(l=>Yo(o,l))):i(e,["parts"],t));let r=s(n,["role"]);return r!=null&&i(e,["role"],r),e}function $o(o,n){let e={},t=s(n,["citationSources"]);return t!=null&&i(e,["citations"],t),e}function Ko(o,n){let e={},t=s(n,["content"]);t!=null&&i(e,["content"],$n(o,t));let r=s(n,["citationMetadata"]);r!=null&&i(e,["citationMetadata"],$o(o,r));let l=s(n,["tokenCount"]);l!=null&&i(e,["tokenCount"],l);let a=s(n,["finishReason"]);a!=null&&i(e,["finishReason"],a);let u=s(n,["avgLogprobs"]);u!=null&&i(e,["avgLogprobs"],u);let f=s(n,["groundingMetadata"]);f!=null&&i(e,["groundingMetadata"],f);let d=s(n,["index"]);d!=null&&i(e,["index"],d);let c=s(n,["logprobsResult"]);c!=null&&i(e,["logprobsResult"],c);let p=s(n,["safetyRatings"]);return p!=null&&i(e,["safetyRatings"],p),e}function En(o,n){let e={},t=s(n,["candidates"]);t!=null&&(Array.isArray(t)?i(e,["candidates"],t.map(u=>Ko(o,u))):i(e,["candidates"],t));let r=s(n,["modelVersion"]);r!=null&&i(e,["modelVersion"],r);let l=s(n,["promptFeedback"]);l!=null&&i(e,["promptFeedback"],l);let a=s(n,["usageMetadata"]);return a!=null&&i(e,["usageMetadata"],a),e}function Wo(o,n){let e={},t=s(n,["values"]);return t!=null&&i(e,["values"],t),e}function Jo(){return{}}function Oo(o,n){let e={},t=s(n,["embeddings"]);return t!=null&&(Array.isArray(t)?i(e,["embeddings"],t.map(l=>Wo(o,l))):i(e,["embeddings"],t)),s(n,["metadata"])!=null&&i(e,["metadata"],Jo()),e}function zo(o,n){let e={},t=s(n,["bytesBase64Encoded"]);t!=null&&i(e,["imageBytes"],V(o,t));let r=s(n,["mimeType"]);return r!=null&&i(e,["mimeType"],r),e}function Kn(o,n){let e={},t=s(n,["safetyAttributes","categories"]);t!=null&&i(e,["categories"],t);let r=s(n,["safetyAttributes","scores"]);r!=null&&i(e,["scores"],r);let l=s(n,["contentType"]);return l!=null&&i(e,["contentType"],l),e}function Xo(o,n){let e={},t=s(n,["_self"]);t!=null&&i(e,["image"],zo(o,t));let r=s(n,["raiFilteredReason"]);r!=null&&i(e,["raiFilteredReason"],r);let l=s(n,["_self"]);return l!=null&&i(e,["safetyAttributes"],Kn(o,l)),e}function Qo(o,n){let e={},t=s(n,["predictions"]);t!=null&&(Array.isArray(t)?i(e,["generatedImages"],t.map(l=>Xo(o,l))):i(e,["generatedImages"],t));let r=s(n,["positivePromptSafetyAttributes"]);return r!=null&&i(e,["positivePromptSafetyAttributes"],Kn(o,r)),e}function Zo(o,n){let e={},t=s(n,["baseModel"]);t!=null&&i(e,["baseModel"],t);let r=s(n,["createTime"]);r!=null&&i(e,["createTime"],r);let l=s(n,["updateTime"]);return l!=null&&i(e,["updateTime"],l),e}function bo(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["name"],t);let r=s(n,["displayName"]);r!=null&&i(e,["displayName"],r);let l=s(n,["description"]);l!=null&&i(e,["description"],l);let a=s(n,["version"]);a!=null&&i(e,["version"],a);let u=s(n,["_self"]);u!=null&&i(e,["tunedModelInfo"],Zo(o,u));let f=s(n,["inputTokenLimit"]);f!=null&&i(e,["inputTokenLimit"],f);let d=s(n,["outputTokenLimit"]);d!=null&&i(e,["outputTokenLimit"],d);let c=s(n,["supportedGenerationMethods"]);return c!=null&&i(e,["supportedActions"],c),e}function jo(o,n){let e={},t=s(n,["totalTokens"]);t!=null&&i(e,["totalTokens"],t);let r=s(n,["cachedContentTokenCount"]);return r!=null&&i(e,["cachedContentTokenCount"],r),e}function ei(o,n){let e={},t=s(n,["video","uri"]);t!=null&&i(e,["uri"],t);let r=s(n,["video","encodedVideo"]);r!=null&&i(e,["videoBytes"],V(o,r));let l=s(n,["encoding"]);return l!=null&&i(e,["mimeType"],l),e}function ni(o,n){let e={},t=s(n,["_self"]);return t!=null&&i(e,["video"],ei(o,t)),e}function vn(o,n){let e={},t=s(n,["generatedSamples"]);t!=null&&(Array.isArray(t)?i(e,["generatedVideos"],t.map(a=>ni(o,a))):i(e,["generatedVideos"],t));let r=s(n,["raiMediaFilteredCount"]);r!=null&&i(e,["raiMediaFilteredCount"],r);let l=s(n,["raiMediaFilteredReasons"]);return l!=null&&i(e,["raiMediaFilteredReasons"],l),e}function ti(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["name"],t);let r=s(n,["metadata"]);r!=null&&i(e,["metadata"],r);let l=s(n,["done"]);l!=null&&i(e,["done"],l);let a=s(n,["error"]);a!=null&&i(e,["error"],a);let u=s(n,["response","generateVideoResponse"]);u!=null&&i(e,["response"],vn(o,u));let f=s(n,["response","generateVideoResponse"]);return f!=null&&i(e,["result"],vn(o,f)),e}function oi(o,n){let e={},t=s(n,["videoMetadata"]);t!=null&&i(e,["videoMetadata"],t);let r=s(n,["thought"]);r!=null&&i(e,["thought"],r);let l=s(n,["codeExecutionResult"]);l!=null&&i(e,["codeExecutionResult"],l);let a=s(n,["executableCode"]);a!=null&&i(e,["executableCode"],a);let u=s(n,["fileData"]);u!=null&&i(e,["fileData"],u);let f=s(n,["functionCall"]);f!=null&&i(e,["functionCall"],f);let d=s(n,["functionResponse"]);d!=null&&i(e,["functionResponse"],d);let c=s(n,["inlineData"]);c!=null&&i(e,["inlineData"],c);let p=s(n,["text"]);return p!=null&&i(e,["text"],p),e}function Wn(o,n){let e={},t=s(n,["parts"]);t!=null&&(Array.isArray(t)?i(e,["parts"],t.map(l=>oi(o,l))):i(e,["parts"],t));let r=s(n,["role"]);return r!=null&&i(e,["role"],r),e}function ii(o,n){let e={},t=s(n,["citations"]);return t!=null&&i(e,["citations"],t),e}function si(o,n){let e={},t=s(n,["content"]);t!=null&&i(e,["content"],Wn(o,t));let r=s(n,["citationMetadata"]);r!=null&&i(e,["citationMetadata"],ii(o,r));let l=s(n,["finishMessage"]);l!=null&&i(e,["finishMessage"],l);let a=s(n,["finishReason"]);a!=null&&i(e,["finishReason"],a);let u=s(n,["avgLogprobs"]);u!=null&&i(e,["avgLogprobs"],u);let f=s(n,["groundingMetadata"]);f!=null&&i(e,["groundingMetadata"],f);let d=s(n,["index"]);d!=null&&i(e,["index"],d);let c=s(n,["logprobsResult"]);c!=null&&i(e,["logprobsResult"],c);let p=s(n,["safetyRatings"]);return p!=null&&i(e,["safetyRatings"],p),e}function _n(o,n){let e={},t=s(n,["candidates"]);t!=null&&(Array.isArray(t)?i(e,["candidates"],t.map(d=>si(o,d))):i(e,["candidates"],t));let r=s(n,["createTime"]);r!=null&&i(e,["createTime"],r);let l=s(n,["responseId"]);l!=null&&i(e,["responseId"],l);let a=s(n,["modelVersion"]);a!=null&&i(e,["modelVersion"],a);let u=s(n,["promptFeedback"]);u!=null&&i(e,["promptFeedback"],u);let f=s(n,["usageMetadata"]);return f!=null&&i(e,["usageMetadata"],f),e}function ri(o,n){let e={},t=s(n,["truncated"]);t!=null&&i(e,["truncated"],t);let r=s(n,["token_count"]);return r!=null&&i(e,["tokenCount"],r),e}function li(o,n){let e={},t=s(n,["values"]);t!=null&&i(e,["values"],t);let r=s(n,["statistics"]);return r!=null&&i(e,["statistics"],ri(o,r)),e}function ui(o,n){let e={},t=s(n,["billableCharacterCount"]);return t!=null&&i(e,["billableCharacterCount"],t),e}function ai(o,n){let e={},t=s(n,["predictions[]","embeddings"]);t!=null&&(Array.isArray(t)?i(e,["embeddings"],t.map(l=>li(o,l))):i(e,["embeddings"],t));let r=s(n,["metadata"]);return r!=null&&i(e,["metadata"],ui(o,r)),e}function fi(o,n){let e={},t=s(n,["gcsUri"]);t!=null&&i(e,["gcsUri"],t);let r=s(n,["bytesBase64Encoded"]);r!=null&&i(e,["imageBytes"],V(o,r));let l=s(n,["mimeType"]);return l!=null&&i(e,["mimeType"],l),e}function Jn(o,n){let e={},t=s(n,["safetyAttributes","categories"]);t!=null&&i(e,["categories"],t);let r=s(n,["safetyAttributes","scores"]);r!=null&&i(e,["scores"],r);let l=s(n,["contentType"]);return l!=null&&i(e,["contentType"],l),e}function di(o,n){let e={},t=s(n,["_self"]);t!=null&&i(e,["image"],fi(o,t));let r=s(n,["raiFilteredReason"]);r!=null&&i(e,["raiFilteredReason"],r);let l=s(n,["_self"]);l!=null&&i(e,["safetyAttributes"],Jn(o,l));let a=s(n,["prompt"]);return a!=null&&i(e,["enhancedPrompt"],a),e}function ci(o,n){let e={},t=s(n,["predictions"]);t!=null&&(Array.isArray(t)?i(e,["generatedImages"],t.map(l=>di(o,l))):i(e,["generatedImages"],t));let r=s(n,["positivePromptSafetyAttributes"]);return r!=null&&i(e,["positivePromptSafetyAttributes"],Jn(o,r)),e}function pi(o,n){let e={},t=s(n,["endpoint"]);t!=null&&i(e,["name"],t);let r=s(n,["deployedModelId"]);return r!=null&&i(e,["deployedModelId"],r),e}function mi(o,n){let e={},t=s(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&i(e,["baseModel"],t);let r=s(n,["createTime"]);r!=null&&i(e,["createTime"],r);let l=s(n,["updateTime"]);return l!=null&&i(e,["updateTime"],l),e}function hi(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["name"],t);let r=s(n,["displayName"]);r!=null&&i(e,["displayName"],r);let l=s(n,["description"]);l!=null&&i(e,["description"],l);let a=s(n,["versionId"]);a!=null&&i(e,["version"],a);let u=s(n,["deployedModels"]);u!=null&&(Array.isArray(u)?i(e,["endpoints"],u.map(c=>pi(o,c))):i(e,["endpoints"],u));let f=s(n,["labels"]);f!=null&&i(e,["labels"],f);let d=s(n,["_self"]);return d!=null&&i(e,["tunedModelInfo"],mi(o,d)),e}function gi(o,n){let e={},t=s(n,["totalTokens"]);return t!=null&&i(e,["totalTokens"],t),e}function yi(o,n){let e={},t=s(n,["tokensInfo"]);return t!=null&&i(e,["tokensInfo"],t),e}function Ci(o,n){let e={},t=s(n,["gcsUri"]);t!=null&&i(e,["uri"],t);let r=s(n,["bytesBase64Encoded"]);r!=null&&i(e,["videoBytes"],V(o,r));let l=s(n,["mimeType"]);return l!=null&&i(e,["mimeType"],l),e}function Ti(o,n){let e={},t=s(n,["_self"]);return t!=null&&i(e,["video"],Ci(o,t)),e}function In(o,n){let e={},t=s(n,["videos"]);t!=null&&(Array.isArray(t)?i(e,["generatedVideos"],t.map(a=>Ti(o,a))):i(e,["generatedVideos"],t));let r=s(n,["raiMediaFilteredCount"]);r!=null&&i(e,["raiMediaFilteredCount"],r);let l=s(n,["raiMediaFilteredReasons"]);return l!=null&&i(e,["raiMediaFilteredReasons"],l),e}function Ei(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["name"],t);let r=s(n,["metadata"]);r!=null&&i(e,["metadata"],r);let l=s(n,["done"]);l!=null&&i(e,["done"],l);let a=s(n,["error"]);a!=null&&i(e,["error"],a);let u=s(n,["response"]);u!=null&&i(e,["response"],In(o,u));let f=s(n,["response"]);return f!=null&&i(e,["result"],In(o,f)),e}function vi(o,n){let e={},t=s(n,["config"]);t!=null&&i(e,["setup"],Vi(o,t));let r=s(n,["model"]);return r!==void 0&&i(e,["setup","model"],r),e}function _i(o,n){let e={},t=s(n,["config"]);t!=null&&i(e,["setup"],Ui(o,t));let r=s(n,["model"]);return r!==void 0&&i(e,["setup","model"],r),e}function Ii(o,n){let e={},t=s(n,["setupComplete"]);t!==void 0&&i(e,["setupComplete"],t);let r=s(n,["serverContent"]);r!=null&&i(e,["serverContent"],Fi(o,r));let l=s(n,["toolCall"]);l!=null&&i(e,["toolCall"],qi(o,l));let a=s(n,["toolCallCancellation"]);a!=null&&i(e,["toolCallCancellation"],Bi(o,a));let u=s(n,["usageMetadata"]);u!=null&&u!=null&&i(e,["usageMetadata"],Xi(o,u));let f=s(n,["goAway"]);f!=null&&i(e,["goAway"],$i(f));let d=s(n,["sessionResumptionUpdate"]);return d!=null&&i(e,["sessionResumptionUpdate"],Wi(d)),e}function Ai(o,n){let e={},t=s(n,["setupComplete"]);t!==void 0&&i(e,["setupComplete"],t);let r=s(n,["serverContent"]);r!=null&&i(e,["serverContent"],Li(o,r));let l=s(n,["toolCall"]);l!=null&&i(e,["toolCall"],Hi(o,l));let a=s(n,["toolCallCancellation"]);a!=null&&i(e,["toolCallCancellation"],Yi(o,a));let u=s(n,["goAway"]);u!=null&&i(e,["goAway"],Ki(u));let f=s(n,["sessionResumptionUpdate"]);f!=null&&i(e,["sessionResumptionUpdate"],Ji(f));let d=s(n,["usageMetadata"]);return d!=null&&d!=null&&i(e,["usageMetadata"],Qi(o,d)),e}function Mi(o){let n={},e=s(o,["targetTokens"]);return e!=null&&i(n,["targetTokens"],e),n}function Si(o){let n={},e=s(o,["targetTokens"]);return e!=null&&i(n,["targetTokens"],e),n}function Pi(o){let n={},e=s(o,["triggerTokens"]);e!=null&&i(n,["triggerTokens"],e);let t=s(o,["slidingWindow"]);return t!=null&&i(n,["slidingWindow"],Mi(t)),n}function Ri(o){let n={},e=s(o,["triggerTokens"]);e!=null&&i(n,["triggerTokens"],e);let t=s(o,["slidingWindow"]);return t!=null&&i(n,["slidingWindow"],Si(t)),n}function xi(o){let n={},e=s(o,["disabled"]);e!=null&&i(n,["disabled"],e);let t=s(o,["startOfSpeechSensitivity"]);t!=null&&i(n,["startOfSpeechSensitivity"],t);let r=s(o,["endOfSpeechSensitivity"]);r!=null&&i(n,["endOfSpeechSensitivity"],r);let l=s(o,["prefixPaddingMs"]);l!=null&&i(n,["prefixPaddingMs"],l);let a=s(o,["silenceDurationMs"]);return a!=null&&i(n,["silenceDurationMs"],a),n}function Ni(o){let n={},e=s(o,["disabled"]);e!=null&&i(n,["disabled"],e);let t=s(o,["startOfSpeechSensitivity"]);t!=null&&i(n,["startOfSpeechSensitivity"],t);let r=s(o,["endOfSpeechSensitivity"]);r!=null&&i(n,["endOfSpeechSensitivity"],r);let l=s(o,["prefixPaddingMs"]);l!=null&&i(n,["prefixPaddingMs"],l);let a=s(o,["silenceDurationMs"]);return a!=null&&i(n,["silenceDurationMs"],a),n}function wi(o){let n={},e=s(o,["automaticActivityDetection"]);e!=null&&i(n,["automaticActivityDetection"],xi(e));let t=s(o,["activityHandling"]);t!=null&&i(n,["activityHandling"],t);let r=s(o,["turnCoverage"]);return r!=null&&i(n,["turnCoverage"],r),n}function Di(o){let n={},e=s(o,["automaticActivityDetection"]);e!=null&&i(n,["automaticActivityDetection"],Ni(e));let t=s(o,["activityHandling"]);t!=null&&i(n,["activityHandling"],t);let r=s(o,["turnCoverage"]);return r!=null&&i(n,["turnCoverage"],r),n}function Vi(o,n){let e={},t=s(n,["generationConfig"]);t!==void 0&&i(e,["generationConfig"],t);let r=s(n,["responseModalities"]);r!==void 0&&i(e,["generationConfig","responseModalities"],r);let l=s(n,["speechConfig"]);l!==void 0&&i(e,["generationConfig","speechConfig"],l);let a=s(n,["systemInstruction"]);a!=null&&i(e,["systemInstruction"],B(o,a));let u=s(n,["tools"]);u!=null&&Array.isArray(u)&&i(e,["tools"],u.map(p=>Bn(o,p)));let f=s(n,["sessionResumption"]);f!=null&&i(e,["sessionResumption"],Oi(f));let d=s(n,["contextWindowCompression"]);d!=null&&i(e,["contextWindowCompression"],Pi(d));let c=s(n,["realtimeInputConfig"]);return c!=null&&i(e,["realtimeInputConfig"],wi(c)),e}function Ui(o,n){let e={},t=s(n,["generationConfig"]);t!==void 0&&i(e,["generationConfig"],t);let r=s(n,["responseModalities"]);r!==void 0?i(e,["generationConfig","responseModalities"],r):i(e,["generationConfig","responseModalities"],["AUDIO"]);let l=s(n,["speechConfig"]);l!==void 0&&i(e,["generationConfig","speechConfig"],l);let a=s(n,["systemInstruction"]);a!=null&&i(e,["systemInstruction"],U(o,a));let u=s(n,["tools"]);u!=null&&Array.isArray(u)&&i(e,["tools"],u.map(p=>Se(o,p)));let f=s(n,["sessionResumption"]);f!=null&&i(e,["sessionResumption"],zi(f));let d=s(n,["contextWindowCompression"]);d!=null&&i(e,["contextWindowCompression"],Ri(d));let c=s(n,["realtimeInputConfig"]);return c!=null&&i(e,["realtimeInputConfig"],Di(c)),e}function Fi(o,n){let e={},t=s(n,["modelTurn"]);t!=null&&i(e,["modelTurn"],$n(o,t));let r=s(n,["turnComplete"]);r!==void 0&&i(e,["turnComplete"],r);let l=s(n,["interrupted"]);l!==void 0&&i(e,["interrupted"],l);let a=s(n,["generationComplete"]);return a!=null&&i(e,["generationComplete"],a),e}function Li(o,n){let e={},t=s(n,["modelTurn"]);t!=null&&i(e,["modelTurn"],Wn(o,t));let r=s(n,["turnComplete"]);r!==void 0&&i(e,["turnComplete"],r);let l=s(n,["interrupted"]);l!==void 0&&i(e,["interrupted"],l);let a=s(n,["generationComplete"]);return a!=null&&i(e,["generationComplete"],a),e}function ki(o,n){let e={},t=s(n,["id"]);t!==void 0&&i(e,["id"],t);let r=s(n,["args"]);r!==void 0&&i(e,["args"],r);let l=s(n,["name"]);return l!==void 0&&i(e,["name"],l),e}function Gi(o,n){let e={},t=s(n,["args"]);t!==void 0&&i(e,["args"],t);let r=s(n,["name"]);return r!==void 0&&i(e,["name"],r),e}function qi(o,n){let e={},t=s(n,["functionCalls"]);return t!=null&&Array.isArray(t)&&i(e,["functionCalls"],t.map(r=>ki(o,r))),e}function Hi(o,n){let e={},t=s(n,["functionCalls"]);return t!=null&&Array.isArray(t)&&i(e,["functionCalls"],t.map(r=>Gi(o,r))),e}function Bi(o,n){let e={},t=s(n,["ids"]);return t!==void 0&&i(e,["ids"],t),e}function Yi(o,n){let e={},t=s(n,["ids"]);return t!==void 0&&i(e,["ids"],t),e}function $i(o){let n={},e=s(o,["timeLeft"]);return e!==void 0&&i(n,["timeLeft"],e),n}function Ki(o){let n={},e=s(o,["timeLeft"]);return e!==void 0&&i(n,["timeLeft"],e),n}function Wi(o){let n={},e=s(o,["newHandle"]);e!==void 0&&i(n,["newHandle"],e);let t=s(o,["resumable"]);t!==void 0&&i(n,["resumable"],t);let r=s(o,["lastConsumedClientMessageIndex"]);return r!==void 0&&i(n,["lastConsumedClientMessageIndex"],r),n}function Ji(o){let n={},e=s(o,["newHandle"]);e!==void 0&&i(n,["newHandle"],e);let t=s(o,["resumable"]);t!==void 0&&i(n,["resumable"],t);let r=s(o,["lastConsumedClientMessageIndex"]);return r!==void 0&&i(n,["lastConsumedClientMessageIndex"],r),n}function Oi(o){let n={},e=s(o,["handle"]);if(e!==void 0&&i(n,["handle"],e),s(o,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function zi(o){let n={},e=s(o,["handle"]);e!==void 0&&i(n,["handle"],e);let t=s(o,["transparent"]);return t!==void 0&&i(n,["transparent"],t),n}function Y(o,n){let e={},t=s(n,["modality"]);t!=null&&i(e,["modality"],t);let r=s(n,["tokenCount"]);return r!=null&&i(e,["tokenCount"],r),e}function Xi(o,n){let e={},t=s(n,["promptTokenCount"]);t!=null&&i(e,["promptTokenCount"],t);let r=s(n,["cachedContentTokenCount"]);r!=null&&i(e,["cachedContentTokenCount"],r);let l=s(n,["responseTokenCount"]);l!=null&&i(e,["responseTokenCount"],l);let a=s(n,["toolUsePromptTokenCount"]);a!=null&&i(e,["toolUsePromptTokenCount"],a);let u=s(n,["thoughtsTokenCount"]);u!=null&&i(e,["thoughtsTokenCount"],u);let f=s(n,["totalTokenCount"]);f!=null&&i(e,["totalTokenCount"],f);let d=s(n,["promptTokensDetails"]);d!=null&&(Array.isArray(d)?i(e,["promptTokensDetails"],d.map(m=>Y(o,m))):i(e,["promptTokensDetails"],d));let c=s(n,["cacheTokensDetails"]);c!=null&&(Array.isArray(c)?i(e,["cacheTokensDetails"],c.map(m=>Y(o,m))):i(e,["cacheTokensDetails"],c));let p=s(n,["responseTokensDetails"]);p!=null&&(Array.isArray(p)?i(e,["responseTokensDetails"],p.map(m=>Y(o,m))):i(e,["responseTokensDetails"],p));let h=s(n,["toolUsePromptTokensDetails"]);return h!=null&&(Array.isArray(h)?i(e,["toolUsePromptTokensDetails"],h.map(m=>Y(o,m))):i(e,["toolUsePromptTokensDetails"],h)),e}function $(o,n){let e={},t=s(n,["modality"]);t!=null&&i(e,["modality"],t);let r=s(n,["tokenCount"]);return r!=null&&i(e,["tokenCount"],r),e}function Qi(o,n){let e={},t=s(n,["promptTokenCount"]);t!=null&&i(e,["promptTokenCount"],t);let r=s(n,["cachedContentTokenCount"]);r!=null&&i(e,["cachedContentTokenCount"],r);let l=s(n,["candidatesTokenCount"]);l!=null&&i(e,["responseTokenCount"],l);let a=s(n,["toolUsePromptTokenCount"]);a!=null&&i(e,["toolUsePromptTokenCount"],a);let u=s(n,["thoughtsTokenCount"]);u!=null&&i(e,["thoughtsTokenCount"],u);let f=s(n,["totalTokenCount"]);f!=null&&i(e,["totalTokenCount"],f);let d=s(n,["promptTokensDetails"]);d!=null&&(Array.isArray(d)?i(e,["promptTokensDetails"],d.map(g=>$(o,g))):i(e,["promptTokensDetails"],d));let c=s(n,["cacheTokensDetails"]);c!=null&&(Array.isArray(c)?i(e,["cacheTokensDetails"],c.map(g=>$(o,g))):i(e,["cacheTokensDetails"],c));let p=s(n,["toolUsePromptTokensDetails"]);p!=null&&(Array.isArray(p)?i(e,["toolUsePromptTokensDetails"],p.map(g=>$(o,g))):i(e,["toolUsePromptTokensDetails"],p));let h=s(n,["candidatesTokensDetails"]);h!=null&&(Array.isArray(h)?i(e,["responseTokensDetails"],h.map(g=>$(o,g))):i(e,["responseTokensDetails"],h));let m=s(n,["trafficType"]);return m!=null&&i(e,["trafficType"],m),e}var Zi="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function bi(o,n,e){let t,r;e.data instanceof Blob?r=JSON.parse(await e.data.text()):r=JSON.parse(e.data),o.isVertexAI()?t=Ai(o,r):t=Ii(o,r),n(t)}var he=class{constructor(n,e,t){this.apiClient=n,this.auth=e,this.webSocketFactory=t}async connect(n){var e,t;let r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a,u=ns(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())a=`${r}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(u);else{let T=this.apiClient.getApiKey();a=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${T}`}let f=()=>{},d=new Promise(T=>{f=T}),c=n.callbacks,p=function(){var T;(T=c?.onopen)===null||T===void 0||T.call(c),f({})},h=this.apiClient,m={onopen:p,onmessage:T=>{bi(h,c.onmessage,T)},onerror:(e=c?.onerror)!==null&&e!==void 0?e:function(T){},onclose:(t=c?.onclose)!==null&&t!==void 0?t:function(T){}},g=this.webSocketFactory.create(a,es(u),m);g.connect(),await d;let y=A(this.apiClient,n.model);if(this.apiClient.isVertexAI()&&y.startsWith("publishers/")){let T=this.apiClient.getProject(),_=this.apiClient.getLocation();y=`projects/${T}/locations/${_}/`+y}let C={},v={model:y,config:n.config,callbacks:n.callbacks};return this.apiClient.isVertexAI()?C=_i(this.apiClient,v):C=vi(this.apiClient,v),g.send(JSON.stringify(C)),new ge(g,this.apiClient)}},ji={turnComplete:!0},ge=class{constructor(n,e){this.conn=n,this.apiClient=e}tLiveClientContent(n,e){if(e.turns!==null&&e.turns!==void 0){let t=[];try{t=I(n,e.turns),n.isVertexAI()?t=t.map(r=>U(n,r)):t=t.map(r=>B(n,r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:t,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClientRealtimeInput(n,e){let t={};if(!("media"in e)||!e.media)throw new Error(`Failed to convert realtime input "media", type: '${typeof e.media}'`);return t={realtimeInput:{mediaChunks:[e.media],activityStart:e.activityStart,activityEnd:e.activityEnd}},t}tLiveClienttToolResponse(n,e){let t=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?t=e.functionResponses:t=[e.functionResponses],t.length===0)throw new Error("functionResponses is required.");for(let l of t){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!n.isVertexAI()&&!("id"in l))throw new Error(Zi)}return{toolResponse:{functionResponses:t}}}sendClientContent(n){n=Object.assign(Object.assign({},ji),n);let e=this.tLiveClientContent(this.apiClient,n);this.conn.send(JSON.stringify(e))}sendRealtimeInput(n){if(n.media==null)throw new Error("Media is required.");let e=this.tLiveClientRealtimeInput(this.apiClient,n);this.conn.send(JSON.stringify(e))}sendToolResponse(n){if(n.functionResponses==null)throw new Error("Tool response parameters are required.");let e=this.tLiveClienttToolResponse(this.apiClient,n);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}};function es(o){let n={};return o.forEach((e,t)=>{n[t]=e}),n}function ns(o){let n=new Headers;for(let[e,t]of Object.entries(o))n.append(e,t);return n}var ye=class extends G{constructor(n){super(),this.apiClient=n,this.generateContent=async e=>await this.generateContentInternal(e),this.generateContentStream=async e=>await this.generateContentStreamInternal(e),this.generateImages=async e=>await this.generateImagesInternal(e).then(t=>{var r;let l,a=[];if(t?.generatedImages)for(let f of t.generatedImages)f&&f?.safetyAttributes&&((r=f?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=f?.safetyAttributes:a.push(f);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l}:u={generatedImages:a},u})}async generateContentInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=Tn(this.apiClient,n);return l=E("{model}:generateContent",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>{let d=_n(this.apiClient,f),c=new L;return Object.assign(c,d),c})}else{let u=Cn(this.apiClient,n);return l=E("{model}:generateContent",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>{let d=En(this.apiClient,f),c=new L;return Object.assign(c,d),c})}}async generateContentStreamInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=Tn(this.apiClient,n);l=E("{model}:streamGenerateContent?alt=sse",u._url),a=u._query,delete u.config,delete u._url,delete u._query;let f=this.apiClient;return r=f.requestStream({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}),r.then(function(d){return te(this,arguments,function*(){var c,p,h,m;try{for(var g=!0,y=fe(d),C;C=yield M(y.next()),c=C.done,!c;g=!0){m=C.value,g=!1;let T=_n(f,m),_=new L;Object.assign(_,T),yield yield M(_)}}catch(v){p={error:v}}finally{try{!g&&!c&&(h=y.return)&&(yield M(h.call(y)))}finally{if(p)throw p.error}}})})}else{let u=Cn(this.apiClient,n);l=E("{model}:streamGenerateContent?alt=sse",u._url),a=u._query,delete u.config,delete u._url,delete u._query;let f=this.apiClient;return r=f.requestStream({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}),r.then(function(d){return te(this,arguments,function*(){var c,p,h,m;try{for(var g=!0,y=fe(d),C;C=yield M(y.next()),c=C.done,!c;g=!0){m=C.value,g=!1;let T=En(f,m),_=new L;Object.assign(_,T),yield yield M(_)}}catch(v){p={error:v}}finally{try{!g&&!c&&(h=y.return)&&(yield M(h.call(y)))}finally{if(p)throw p.error}}})})}}async embedContent(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=Do(this.apiClient,n);return l=E("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>{let d=ai(this.apiClient,f),c=new Q;return Object.assign(c,d),c})}else{let u=uo(this.apiClient,n);return l=E("{model}:batchEmbedContents",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>{let d=Oo(this.apiClient,f),c=new Q;return Object.assign(c,d),c})}}async generateImagesInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=Uo(this.apiClient,n);return l=E("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>{let d=ci(this.apiClient,f),c=new Z;return Object.assign(c,d),c})}else{let u=fo(this.apiClient,n);return l=E("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>{let d=Qo(this.apiClient,f),c=new Z;return Object.assign(c,d),c})}}async get(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=Fo(this.apiClient,n);return l=E("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>hi(this.apiClient,f))}else{let u=co(this.apiClient,n);return l=E("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>bo(this.apiClient,f))}}async countTokens(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=ko(this.apiClient,n);return l=E("{model}:countTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>{let d=gi(this.apiClient,f),c=new b;return Object.assign(c,d),c})}else{let u=mo(this.apiClient,n);return l=E("{model}:countTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>{let d=jo(this.apiClient,f),c=new b;return Object.assign(c,d),c})}}async computeTokens(n){var e;let t,r="",l={};if(this.apiClient.isVertexAI()){let a=Go(this.apiClient,n);return r=E("{model}:computeTokens",a._url),l=a._query,delete a.config,delete a._url,delete a._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(u=>u.json()),t.then(u=>{let f=yi(this.apiClient,u),d=new se;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=Bo(this.apiClient,n);return l=E("{model}:predictLongRunning",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>Ei(this.apiClient,f))}else{let u=yo(this.apiClient,n);return l=E("{model}:predictLongRunning",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>ti(this.apiClient,f))}}};function ts(o,n){let e={},t=s(n,["operationName"]);t!=null&&i(e,["_url","operationName"],t);let r=s(n,["config"]);return r!=null&&i(e,["config"],r),e}function os(o,n){let e={},t=s(n,["operationName"]);t!=null&&i(e,["_url","operationName"],t);let r=s(n,["config"]);return r!=null&&i(e,["config"],r),e}function is(o,n){let e={},t=s(n,["operationName"]);t!=null&&i(e,["operationName"],t);let r=s(n,["resourceName"]);r!=null&&i(e,["_url","resourceName"],r);let l=s(n,["config"]);return l!=null&&i(e,["config"],l),e}function ss(o,n){let e={},t=s(n,["video","uri"]);t!=null&&i(e,["uri"],t);let r=s(n,["video","encodedVideo"]);r!=null&&i(e,["videoBytes"],V(o,r));let l=s(n,["encoding"]);return l!=null&&i(e,["mimeType"],l),e}function rs(o,n){let e={},t=s(n,["_self"]);return t!=null&&i(e,["video"],ss(o,t)),e}function An(o,n){let e={},t=s(n,["generatedSamples"]);t!=null&&(Array.isArray(t)?i(e,["generatedVideos"],t.map(a=>rs(o,a))):i(e,["generatedVideos"],t));let r=s(n,["raiMediaFilteredCount"]);r!=null&&i(e,["raiMediaFilteredCount"],r);let l=s(n,["raiMediaFilteredReasons"]);return l!=null&&i(e,["raiMediaFilteredReasons"],l),e}function ls(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["name"],t);let r=s(n,["metadata"]);r!=null&&i(e,["metadata"],r);let l=s(n,["done"]);l!=null&&i(e,["done"],l);let a=s(n,["error"]);a!=null&&i(e,["error"],a);let u=s(n,["response","generateVideoResponse"]);u!=null&&i(e,["response"],An(o,u));let f=s(n,["response","generateVideoResponse"]);return f!=null&&i(e,["result"],An(o,f)),e}function us(o,n){let e={},t=s(n,["gcsUri"]);t!=null&&i(e,["uri"],t);let r=s(n,["bytesBase64Encoded"]);r!=null&&i(e,["videoBytes"],V(o,r));let l=s(n,["mimeType"]);return l!=null&&i(e,["mimeType"],l),e}function as(o,n){let e={},t=s(n,["_self"]);return t!=null&&i(e,["video"],us(o,t)),e}function Mn(o,n){let e={},t=s(n,["videos"]);t!=null&&(Array.isArray(t)?i(e,["generatedVideos"],t.map(a=>as(o,a))):i(e,["generatedVideos"],t));let r=s(n,["raiMediaFilteredCount"]);r!=null&&i(e,["raiMediaFilteredCount"],r);let l=s(n,["raiMediaFilteredReasons"]);return l!=null&&i(e,["raiMediaFilteredReasons"],l),e}function Sn(o,n){let e={},t=s(n,["name"]);t!=null&&i(e,["name"],t);let r=s(n,["metadata"]);r!=null&&i(e,["metadata"],r);let l=s(n,["done"]);l!=null&&i(e,["done"],l);let a=s(n,["error"]);a!=null&&i(e,["error"],a);let u=s(n,["response"]);u!=null&&i(e,["response"],Mn(o,u));let f=s(n,["response"]);return f!=null&&i(e,["result"],Mn(o,f)),e}var Ce=class extends G{constructor(n){super(),this.apiClient=n}async getVideosOperation(n){let e=n.operation,t=n.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let l=e.name.split("/operations/")[0];var r=void 0;return t&&"httpOptions"in t&&(r=t.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:l,config:{httpOptions:r}})}else return this.getVideosOperationInternal({operationName:e.name,config:t})}async getVideosOperationInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){let u=os(this.apiClient,n);return l=E("{operationName}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>Sn(this.apiClient,f))}else{let u=ts(this.apiClient,n);return l=E("{operationName}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>ls(this.apiClient,f))}}async fetchPredictVideosOperationInternal(n){var e;let t,r="",l={};if(this.apiClient.isVertexAI()){let a=is(this.apiClient,n);return r=E("{resourceName}:fetchPredictOperation",a._url),l=a._query,delete a.config,delete a._url,delete a._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(u=>u.json()),t.then(u=>Sn(this.apiClient,u))}else throw new Error("This method is only supported by the Vertex AI.")}};var fs="Content-Type",ds="X-Server-Timeout",cs="User-Agent",ps="x-goog-api-client",ms="0.8.0",hs=`google-genai-sdk/${ms}`,gs="v1beta1",ys="v1beta",Pn=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/,Te=class extends Error{constructor(n,e){e?super(n,{cause:e}):super(n,{cause:new Error().stack}),this.message=n,this.name="ClientError"}},oe=class extends Error{constructor(n,e){e?super(n,{cause:e}):super(n,{cause:new Error().stack}),this.message=n,this.name="ServerError"}},Ee=class{constructor(n){var e,t;this.clientOptions=Object.assign(Object.assign({},n),{project:n.project,location:n.location,apiKey:n.apiKey,vertexai:n.vertexai});let r={};this.clientOptions.vertexai?(r.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:gs,this.getProject()||this.getLocation()?(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(r.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:ys,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,n.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,n.httpOptions))}isVertexAI(){var n;return(n=this.clientOptions.vertexai)!==null&&n!==void 0?n:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(n){if(!n||n.baseUrl===void 0||n.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let t=[n.baseUrl.endsWith("/")?n.baseUrl.slice(0,-1):n.baseUrl];return n.apiVersion&&n.apiVersion!==""&&t.push(n.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let n=this.getBaseUrl(),e=new URL(n);return e.protocol="wss",e.toString()}setBaseUrl(n){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=n;else throw new Error("HTTP options are not correctly set.")}constructUrl(n,e,t){let r=[this.getRequestUrlInternal(e)];return t&&r.push(this.getBaseResourcePath()),n!==""&&r.push(n),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(n){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||n.path.startsWith("projects/")||n.httpMethod==="GET"&&n.path.startsWith("publishers/google/models"))}async request(n){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));let t=this.shouldPrependVertexProjectPath(n),r=this.constructUrl(n.path,e,t);if(n.queryParams)for(let[a,u]of Object.entries(n.queryParams))r.searchParams.append(a,String(u));let l={};if(n.httpMethod==="GET"){if(n.body&&n.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=n.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,e),this.unaryApiCall(r,l,n.httpMethod)}patchHttpOptions(n,e){let t=JSON.parse(JSON.stringify(n));for(let[r,l]of Object.entries(e))typeof l=="object"?t[r]=Object.assign(Object.assign({},t[r]),l):l!==void 0&&(t[r]=l);return t}async requestStream(n){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));let t=this.shouldPrependVertexProjectPath(n),r=this.constructUrl(n.path,e,t);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=n.body,l=await this.includeExtraHttpOptionsToRequestInit(l,e),this.streamApiCall(r,l,n.httpMethod)}async includeExtraHttpOptionsToRequestInit(n,e){if(e&&e.timeout&&e.timeout>0){let t=new AbortController,r=t.signal;setTimeout(()=>t.abort(),e.timeout),n.signal=r}return n.headers=await this.getHeadersInternal(e),n}async unaryApiCall(n,e,t){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:t})).then(async r=>(await Rn(r),new ne(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(n,e,t){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:t})).then(async r=>(await Rn(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(n){var e;return te(this,arguments,function*(){let r=(e=n?.body)===null||e===void 0?void 0:e.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){let{done:u,value:f}=yield M(r.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let d=l.decode(f);a+=d;let c=a.match(Pn);for(;c;){let p=c[1];try{let h=JSON.parse(p);yield yield M(h),a=a.slice(c[0].length),c=a.match(Pn)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{r.releaseLock()}})}async apiCall(n,e){return fetch(n,e).catch(t=>{throw new Error(`exception ${t} sending request`)})}getDefaultHeaders(){let n={},e=hs+" "+this.clientOptions.userAgentExtra;return n[cs]=e,n[ps]=e,n[fs]="application/json",n}async getHeadersInternal(n){let e=new Headers;if(n&&n.headers){for(let[t,r]of Object.entries(n.headers))e.append(t,r);n.timeout&&n.timeout>0&&e.append(ds,String(Math.ceil(n.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(n,e){var t;let r={};e!=null&&(r.mimeType=e.mimeType,r.name=e.name,r.displayName=e.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);let l=this.clientOptions.uploader,a=await l.stat(n);r.sizeBytes=String(a.size);let u=(t=e?.mimeType)!==null&&t!==void 0?t:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;let f=await this.fetchUploadUrl(r,e);return l.upload(n,f,this)}async fetchUploadUrl(n,e){var t;let r={};e?.httpOptions?r=e.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${n.mimeType}`}};let l={file:n},a=await this.request({path:E("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!a||!a?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let u=(t=a?.headers)===null||t===void 0?void 0:t["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}};async function Rn(o){var n;if(o===void 0)throw new oe("response is undefined");if(!o.ok){let e=o.status,t=o.statusText,r;!((n=o.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?r=await o.json():r={error:{message:"exception parsing response",code:o.status,status:o.statusText}};let l=`got status: ${e} ${t}. ${JSON.stringify(r)}`;throw e>=400&&e<500?new Te(l):e>=500&&e<600?new oe(l):new Error(l)}}var Cs=1024*1024*8;async function Ts(o,n,e){var t,r;let l=0,a=0,u=new ne(new Response),f="upload";for(l=o.size;a<l;){let c=Math.min(Cs,l-a),p=o.slice(a,a+c);if(a+c>=l&&(f+=", finalize"),u=await e.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:n,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(a),"Content-Length":String(c)}}}),a+=c,((t=u?.headers)===null||t===void 0?void 0:t["x-goog-upload-status"])!=="active")break;if(l<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}let d=await u?.json();if(((r=u?.headers)===null||r===void 0?void 0:r["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function Es(o){return{size:o.size,type:o.type}}var ve=class{async upload(n,e,t){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await Ts(n,e,t)}async stat(n){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await Es(n)}};var _e=class{create(n,e,t){return new Ie(n,e,t)}},Ie=class{constructor(n,e,t){this.url=n,this.headers=e,this.callbacks=t}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(n){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(n)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var xn="x-goog-api-key",Ae=class{constructor(n){this.apiKey=n}async addAuthHeaders(n){n.get(xn)===null&&n.append(xn,this.apiKey)}};var vs="gl-node/",Nn=class{constructor(n){var e;if(n.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(n.project||n.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=n.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=n.apiKey,this.apiVersion=n.apiVersion;let t=new Ae(this.apiKey);this.apiClient=new Ee({auth:t,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:n.httpOptions,userAgentExtra:vs+"web",uploader:new ve}),this.models=new ye(this.apiClient),this.live=new he(this.apiClient,t,new _e),this.chats=new de(this.models,this.apiClient),this.caches=new ae(this.apiClient),this.files=new me(this.apiClient),this.operations=new Ce(this.apiClient)}};export{rn as ActivityHandling,Ye as BlockedReason,ae as Caches,ce as Chat,de as Chats,se as ComputeTokensResponse,en as ControlReferenceType,b as CountTokensResponse,le as CreateFileResponse,j as DeleteCachedContentResponse,ue as DeleteFileResponse,Je as DynamicRetrievalConfigMode,Q as EmbedContentResponse,sn as EndSensitivity,be as FileSource,Ze as FileState,me as Files,qe as FinishReason,Oe as FunctionCallingConfigMode,un as FunctionResponse,L as GenerateContentResponse,dn as GenerateContentResponsePromptFeedback,cn as GenerateContentResponseUsageMetadata,Z as GenerateImagesResponse,pn as GenerateVideosResponse,Nn as GoogleGenAI,Le as HarmBlockMethod,ke as HarmBlockThreshold,Fe as HarmCategory,He as HarmProbability,Be as HarmSeverity,ne as HttpResponse,Qe as ImagePromptLanguage,Ve as Language,ee as ListCachedContentsResponse,re as ListFilesResponse,he as Live,hn as LiveClientToolResponse,gn as LiveSendToolResponseParameters,je as MaskReferenceMode,tn as MediaModality,We as MediaResolution,Ke as Modality,Ge as Mode,ye as Models,Ce as Operations,De as Outcome,z as PagedItem,X as Pager,Xe as PersonGeneration,mn as ReplayResponse,ze as SafetyFilterLevel,ge as Session,on as StartSensitivity,nn as SubjectReferenceType,$e as TrafficType,ln as TurnCoverage,Ue as Type,xs as createModelContent,Ms as createPartFromBase64,Ss as createPartFromCodeExecutionResult,Ps as createPartFromExecutableCode,Is as createPartFromFunctionCall,As as createPartFromFunctionResponse,an as createPartFromText,_s as createPartFromUri,Rs as createUserContent};
/*! Bundled license information:

@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
//# sourceMappingURL=genai.mjs.map
//# sourceMappingURL=genai.mjs.map